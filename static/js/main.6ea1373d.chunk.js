(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,n){e.exports=n(51)},36:function(e,t,n){},37:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},38:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(12),l=n.n(i),c=(n(36),n(37),n(38),n(3)),s=n(1),o=n(4),u=n(5),d=n(7),p=n(6),h=n(8),b=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"new-recipe"},r.a.createElement("form",null,r.a.createElement("h2",{className:"top-bar"},this.props.topBar),this.props.editableTitle?r.a.createElement("input",{className:"rename-list",onChange:function(t){return e.props.onUpdateTitle(t.target.value)},onKeyDown:this.props.onTitleEnterKey,onBlur:this.props.onTitleBlur,value:this.props.title,onFocus:function(e){return e.target.select()},autoFocus:!0,required:!0}):r.a.createElement("div",null,r.a.createElement("h2",null,r.a.createElement("span",{onClick:this.props.onTitleClick,className:"recipe-title"},""===this.props.title?"<Recipe-Name>":this.props.title))),r.a.createElement("div",{className:"servings"},this.props.editableServings?r.a.createElement("input",{onChange:function(t){return e.props.onUpdateServings(t.target.value)},onKeyDown:this.props.onServingsEnterKey,onBlur:this.props.onServingsBlur,value:this.props.servings,type:"number",min:"1",step:"1",onFocus:function(e){return e.target.select()},autoFocus:!0}):r.a.createElement("h2",{className:"servings",onClick:this.props.onServingsClick}," Serves: .... ",this.props.servings))))}}]),t}(r.a.Component),m=n(2),g=n.n(m),f={weight:["kg","gr","oz","lb","tbsp - dry","tsp - dry","cup - dry"],volume:["litre","ml","pint","oz - liquid","tbsp - liquid","tsp - liquid","cup - liquid"],units:["unit"]},E=g.a.keys(f).map(function(e){return f[e].map(function(e){return e})}).flat(),v="pick a recipe to edit",y=function(e){return e.recipes},T=function(e){var t=y(e),n=function(e){return e.selections.selectedRecipe.recipe?e.selections.selectedRecipe.recipe:v}(e);return g.a.values(t).filter(function(e){return e.title===n})},O=function(e){return e.selections.selectedRecipe.recipe&&e.recipes?g.a.values(T(e))[0]:{}},j=function(e){return e.pantry},k=function(e){return e.week},C=n(9),S=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(e){var t=this,n=this.props.ingredients;return r.a.createElement("div",null,r.a.createElement("div",null," ",r.a.createElement("input",{className:"button",type:"submit",value:"Add ingredient",onClick:this.props.onAddIngredient})),r.a.createElement("table",{className:"new-ingredients-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ingredient"),r.a.createElement("th",null,"Qty."),r.a.createElement("th",null,"Unit")),Object.keys(n).map(function(e){return r.a.createElement("tr",{key:"ingredient-row-"+e},"name"===n[e].editable?r.a.createElement("td",null,r.a.createElement("input",{className:"name",id:e,list:"pantry",value:n[e].name,onChange:function(e){return t.props.onTableChange(e)},onKeyDown:t.props.onTableEnterKey,onBlur:t.props.onTableBlur,onFocus:function(e){return e.target.select()},autoFocus:!0}),r.a.createElement("datalist",{id:"pantry"},g.a.keys(t.props.pantry).map(function(e){return r.a.createElement("option",null,e)}))):r.a.createElement("td",{id:e,className:"name",onClick:t.props.onTableClick},n[e].name),r.a.createElement("td",null,"qty"===n[e].editable?r.a.createElement("input",{className:"qty",id:e,type:"number",min:"0",value:n[e].qty,onChange:function(e){return t.props.onTableChange(e)},onKeyDown:t.props.onTableEnterKey,onBlur:t.props.onTableBlur,onFocus:function(e){return e.target.select()},autoFocus:!0,required:!0}):r.a.createElement("span",{id:e,className:"qty",onClick:t.props.onTableClick},n[e].qty)),r.a.createElement("td",null,"unit"===n[e].editable?r.a.createElement("select",{type:"list",name:"unit",className:"unit",id:e,onChange:t.props.onTableChange,onBlur:t.props.onTableBlur},E.map(function(e){return r.a.createElement("option",{key:"unit-list-item-"+e},e)})):r.a.createElement("span",{id:e,className:"unit",onClick:t.props.onTableClick},n[e].unit)))}))))}}]),t}(r.a.Component),w=Object(C.b)(function(e){return{pantry:j(e)}})(S),D=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(e){return r.a.createElement("div",null,r.a.createElement(w,{onAddIngredient:this.props.onAddIngredient,ingredients:this.props.ingredients,onTableChange:this.props.onTableChange,onTableClick:this.props.onTableClick,onTableEnterKey:this.props.onTableEnterKey,onTableBlur:this.props.onTableBlur}))}}]),t}(r.a.Component),I=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){var t=n.props.title,a=n.props.servings,r=n.props.ingredients,i=g.a.entries(r),l=g.a.values(r);""===t?alert("Please supply a recipe name"):l.filter(function(e){return"new ingredient"===e.name}).length>0?alert("Please supply an ingredient name"):0===i.length&&r.constructor===Object?alert("Please supply ingredients"):(n.props.addRecipe(t,{title:t,editableTitle:!1,servings:a,editableServings:!1,ingredients:r}),n.props.onSubmitReset())},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("button",{className:"button",onClick:this.handleSubmit},"submit"))}}]),t}(r.a.Component),N=Object(C.b)(null,{addRecipe:function(e,t){return{type:"ADD_RECIPE",payload:{recipe:e,content:t}}}})(I),R=n(14),A={date:function(e){var t=e.split("/"),n=Object(R.a)(t,3),a=n[0],r=n[1],i=n[2];return"".concat(i,"-").concat(a,"-").concat(r)},uppercase:function(e){return e.toUpperCase()},integer:function(e){return parseInt(e)},float:function(e){return parseFloat(e)}},q=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleTitleClick=function(){return n.setState({editableTitle:!n.state.editableTitle})},n.handleTitleEnterKey=function(e){13===(e.keyCode||e.which)&&n.setState({editableTitle:!n.state.editableTitle})},n.handleTitleBlur=function(){return n.state.editableTitle?n.setState({editableTitle:!n.state.editableTitle}):null},n.updateTitle=function(e){n.setState({title:e})},n.handleServingsClick=function(){n.setState({editableServings:!n.state.editableServings})},n.handleServingsEnterKey=function(e){13===(e.keyCode||e.which)&&n.setState({editableServings:!n.state.editableServings})},n.handleServingsBlur=function(){return n.state.editableServings?n.setState({editableServings:!n.state.editableServings}):null},n.updateServings=function(e){n.setState({servings:A.integer(e)})},n.handleAddIngredient=function(){var e=++n.nextid;n.setState({ingredients:Object(s.a)({},n.state.ingredients,Object(c.a)({},e,{name:"new ingredient",qty:1,unit:"kg",editable:null}))})},n.handleTableClick=function(e){var t=n.state.ingredients,a=e.target,r=a.className,i=parseInt(a.id);n.setState({ingredients:Object(s.a)({},t,Object(c.a)({},i,Object(s.a)({},t[i],{editable:r})))})},n.handleTableEnterKey=function(e){var t=n.state.ingredients,a=e.target,r=parseInt(a.id);13===(e.keyCode||e.which)&&n.setState({ingredients:Object(s.a)({},t,Object(c.a)({},r,Object(s.a)({},t[r],{editable:null})))})},n.handleTableBlur=function(e){var t=n.state.ingredients,a=e.target,r=parseInt(a.id);n.setState({ingredients:Object(s.a)({},t,Object(c.a)({},r,Object(s.a)({},t[r],{editable:null})))})},n.handleTableChange=function(e){var t=e.target,a=t.value,r=parseInt(t.id),i=n.state.ingredients,l=t.className;switch(l){case"qty":n.setState({ingredients:Object(s.a)({},i,Object(c.a)({},r,Object(s.a)({},i[r],Object(c.a)({},l,A.float(a)))))});break;default:n.setState({ingredients:Object(s.a)({},i,Object(c.a)({},r,Object(s.a)({},i[r],Object(c.a)({},l,a))))})}},n.handleSubmitReset=function(){return n.setState(Object(s.a)({},n.defaultState))},n.nextid=0,n.defaultState={editableTitle:!1,title:"",editableServings:!1,servings:1,ingredients:{},list:[]},n.state=n.defaultState,n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"new-recipe"},r.a.createElement(b,{topBar:"Add new recipe",editableTitle:this.state.editableTitle,editableServings:this.state.editableServings,title:this.state.title,onTitleClick:this.handleTitleClick,onTitleEnterKey:this.handleTitleEnterKey,onTitleBlur:this.handleTitleBlur,onUpdateTitle:this.updateTitle,servings:this.state.servings,onServingsClick:this.handleServingsClick,onServingsEnterKey:this.handleServingsEnterKey,onServingsBlur:this.handleServingsBlur,onUpdateServings:this.updateServings}),r.a.createElement(D,{onAddIngredient:this.handleAddIngredient,ingredients:this.state.ingredients,onTableChange:this.handleTableChange,onTableClick:this.handleTableClick,onTableEnterKey:this.handleTableEnterKey,onTableBlur:this.handleTableBlur}),r.a.createElement("div",null,r.a.createElement(N,{title:this.state.title,servings:this.state.servings,ingredients:this.state.ingredients,onSubmitReset:this.handleSubmitReset})))}}]),t}(r.a.Component),_=(n(44),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){setTimeout(function(){n.props.selectRecipe(e),n.props.editRecipe(n.props.selected)},100)},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.recipes;return r.a.createElement("div",{className:"recipe-list"},r.a.createElement("h2",{className:"title"},"The recipes"),r.a.createElement("div",{className:"recipe-list-block"},g.a.keys(t).map(function(t){return r.a.createElement("button",{className:"recipe-list-item",key:"recipe-"+t,onClick:function(){return e.handleClick(t)}},t)})))}}]),t}(r.a.Component));var B=Object(C.b)(function(e){return{recipes:e.recipes,selected:O(e)}},{editRecipe:function(e){return{type:"EDIT_RECIPE",payload:{recipe:e}}},selectRecipe:function(e){return{type:"SELECT_RECIPE",payload:{recipe:e}}}})(_),L=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleGetIngredients=function(e){return e||{}},n.handleGetServings=function(e){return e||0},n.handleGetTitle=function(e){return e||""===e?e:v},n.handleTitleClick=function(e){return e.target.innerHTML!==v?n.props.toggleTitle(e.target.innerHTML):null},n.handleUpdateTitle=function(e){n.props.updateTitle(e)},n.handleTitleEnterKey=function(e){13===(e.keyCode||e.which)&&n.props.toggleTitle()},n.handleTitleBlur=function(){return n.props.edited.editableTitle?n.props.toggleTitle():null},n.handleServingsEnterKey=function(e){13===(e.keyCode||e.which)&&n.props.toggleServings()},n.handleServingsClick=function(e){return 0!==e?n.props.toggleServings():null},n.handleUpdateServings=function(e){return n.props.updateServings(A.integer(e))},n.handleServingsBlur=function(){return n.props.edited.editableServings?n.props.toggleServings():null},n.handleTableClick=function(e){n.props.edited.ingredients;var t=e.target,a=t.className,r=parseInt(t.id);n.props.toggleTable(r,a)},n.handleTableEnterKey=function(e){n.props.edited.ingredients;var t=e.target,a=parseInt(t.id);13===(e.keyCode||e.which)&&n.props.toggleTable(a,null)},n.handleTableBlur=function(e){n.props.edited.ingredients;var t=e.target,a=parseInt(t.id);n.props.toggleTable(a,null)},n.handleTableChange=function(e){var t=e.target,a=t.value,r=parseInt(t.id),i=(n.props.edited.ingredients,t.className);switch(i){case"qty":n.props.updateTable(r,i,A.float(a));break;default:n.props.updateTable(r,i,a)}},n.handleAddIngredient=function(){return n.props.addIngredient()},n.handleResetEdit=function(){return n.props.resetEdit()},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(e){var t=this;return r.a.createElement("div",{className:"edit-recipe"},r.a.createElement(b,{topBar:"Edit recipe",title:this.handleGetTitle(this.props.edited.title),editableTitle:this.props.edited.editableTitle,editableServings:this.props.edited.editableServings,servings:this.handleGetServings(this.props.edited.servings),onTitleClick:this.handleTitleClick,onTitleEnterKey:this.handleTitleEnterKey,onTitleBlur:this.handleTitleBlur,onUpdateTitle:this.handleUpdateTitle,onServingsClick:function(){return t.handleServingsClick(t.props.edited.servings)},onUpdateServings:this.handleUpdateServings,onServingsEnterKey:this.handleServingsEnterKey,onServingsBlur:this.handleServingsBlur}),r.a.createElement(U,{key:"ingredients-"+this.props.edited.title,ingredients:this.handleGetIngredients(this.props.edited.ingredients),onTableClick:this.handleTableClick,onTableEnterKey:this.handleTableEnterKey,onTableBlur:this.handleTableBlur,onTableChange:this.handleTableChange,onAddIngredient:this.handleAddIngredient}),r.a.createElement(N,{title:this.props.edited.title,servings:this.props.edited.servings,ingredients:this.props.edited.ingredients,onSubmitReset:this.handleResetEdit}),r.a.createElement("button",{className:"button",onClick:this.handleResetEdit},"Cancel"))}}]),t}(r.a.Component),U=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(e){return r.a.createElement("div",null,r.a.createElement(w,{onAddIngredient:this.props.onAddIngredient,ingredients:this.props.ingredients,onTableChange:this.props.onTableChange,onTableClick:this.props.onTableClick,onTableEnterKey:this.props.onTableEnterKey,onTableBlur:this.props.onTableBlur}))}}]),t}(r.a.Component),K=Object(C.b)(function(e){var t;return{edited:(t=e).editedRecipe.recipe?t.editedRecipe.recipe:{}}},{toggleTitle:function(e){return{type:"TOGGLE_TITLE",payload:{title:e}}},toggleServings:function(e,t){return{type:"TOGGLE_SERVINGS",payload:{title:e,servings:t}}},updateTitle:function(e){return{type:"UPDATE_TITLE",payload:{title:e}}},updateServings:function(e){return{type:"UPDATE_SERVINGS",payload:{servings:e}}},toggleTable:function(e,t){return{type:"TOGGLE_TABLE",payload:{id:e,className:t}}},updateTable:function(e,t,n){return{type:"UPDATE_TABLE",payload:{id:e,className:t,value:n}}},resetEdit:function(){return{type:"RESET_EDIT"}},addIngredient:function(){return{type:"ADD_INGREDIENT"}}})(L),P=(r.a.Component,function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).selectedElement=r.a.createRef(),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.open;return r.a.cloneElement(t,{ref:this.selectedElement,onClick:n})}}]),t}(r.a.Component));P.displayName="Select";var F=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).styles={wrapper:{position:"relative",display:"inline-block",zIndex:"98",color:"#555",cursor:"help"},tooltip:{position:"absolute",zIndex:"99",minWidth:"200px",maxWidth:"420px",background:"#000",bottom:"100%",left:"50%",marginBottom:"10px",padding:"5px",WebkitTransform:"translateX(-50%)",msTransform:"translateX(-50%)",OTransform:"translateX(-50%)",transform:"translateX(-50%)"},content:{background:"#000",color:"#fff",display:"inline",fontSize:".8em",padding:".3em 1em"},arrow:{position:"absolute",width:"0",height:"0",bottom:"-5px",left:"50%",marginLeft:"-5px",borderLeft:"solid transparent 5px",borderRight:"solid transparent 5px",borderTop:"solid #000 5px"},gap:{position:"absolute",width:"100%",height:"20px",bottom:"-20px"}},n.mergeStyles=function(e){Object.keys(n.styles).forEach(function(t){Object.assign(n.styles[t],e[t])})},n.show=function(){return n.setVisibility(!0)},n.hide=function(){return n.setVisibility(!1)},n.setVisibility=function(e){n.setState(Object.assign({},n.state,{visible:e}))},n.handleTouch=function(){n.show(),n.assignOutsideTouchHandler()},n.assignOutsideTouchHandler=function(){document.addEventListener("touchstart",function e(t){for(var a=t.target,r=l.a.findDOMNode(n.refs.instance);a.parentNode;){if(a===r)return;a=a.parentNode}a===document&&(n.hide(),document.removeEventListener("touchstart",e))})},n.state={visible:!1},e.styles&&n.mergeStyles(e.styles),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=this.state,n=this.styles,a=this.show,i=this.hide,l=this.handleTouch;return r.a.createElement("div",{onMouseEnter:a,onMouseLeave:i,onTouchStart:l,ref:"wrapper",style:n.wrapper},e.children,t.visible&&r.a.createElement("div",{ref:"tooltip",style:n.tooltip},r.a.createElement("div",{ref:"content",style:n.content},e.content),r.a.createElement("div",{ref:"arrow",style:n.arrow}),r.a.createElement("div",{ref:"gap",style:n.gap})))}}]),t}(r.a.Component),x=(n(45),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleToggleEdit=function(e){n.setState(Object(c.a)({},e,!n.state.editable))},n.handleUpdateInput=function(e,t){var a=t.target.value;n.setState(Object(c.a)({},e,a))},n.handleOnEnter=function(e){var t=n.props.product;13===(e.keyCode||e.which)&&(t!==n.state.productTitle&&n.props.updateProductTitle(t,n.state.productTitle),n.setState({editableProductTitle:!n.state.editableProductTitle}))},n.handleSubmit=function(){var e=n.props.product,t=n.state.qty,a=n.state.unit;n.props.addFormat(e,t,a),n.setState({editable:!n.state.editable})},n.handleRemoveProduct=function(){return window.confirm("this will remove the product from the inventory. go a head?")?n.props.removeProduct(n.props.product):null},n.handleRemoveFormat=function(e){n.props.removeFormat(n.props.product,e)},n.defaultState={productTitle:n.props.product,qty:0,unit:"kg",editable:!1,editableProductTitle:!1},n.state=n.defaultState,n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.product,n=this.props.fmts;return r.a.createElement("div",null,r.a.createElement("p",{className:"remove-button",onClick:this.handleRemoveProduct},"X"),this.state.editableProductTitle?r.a.createElement("input",{value:this.state.productTitle,onChange:function(t){return e.handleUpdateInput("productTitle",t)},onKeyDown:function(t){return e.handleOnEnter(t)},autoFocus:!0}):r.a.createElement("h2",{onClick:function(){return e.handleToggleEdit("editableProductTitle")}},t),r.a.createElement("p",null,"Available formats:"),n.map(function(t){return r.a.createElement("div",{className:"format-div"},r.a.createElement("li",null,t.qty+" "+t.unit),r.a.createElement("p",{onClick:function(){return e.handleRemoveFormat(n.indexOf(t))}},"x"))}),this.state.editable?r.a.createElement("div",null,r.a.createElement("input",{type:"number",min:1,className:"qty",value:this.state.qty,onChange:function(t){return e.handleUpdateInput("qty",t)}}),r.a.createElement("select",{value:this.state.unit,onChange:function(t){return e.handleUpdateInput("unit",t)}},E.map(function(e){return r.a.createElement("option",{key:"unit-list-item-"+e},e)})),r.a.createElement("button",{className:"button",onClick:this.handleSubmit},"submit")):r.a.createElement("h3",{onClick:function(){return e.handleToggleEdit("editable")}},"Add Format"))}}]),t}(r.a.Component)),G=Object(C.b)(function(e){return{products:j(e)}},{addFormat:function(e,t,n){return{type:"ADD_FORMAT",payload:{product:e,qty:t,unit:n}}},removeProduct:function(e){return{type:"REMOVE_PRODUCT",payload:{product:e}}},updateProductTitle:function(e,t){return{type:"UPDATE_PRODUCT_TITLE",payload:{product:e,newTitle:t}}},removeFormat:function(e,t){return{type:"REMOVE_FORMAT",payload:{product:e,id:t}}}})(x),M=(n(46),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleEdit=function(){n.setState({editable:!n.state.editable})},n.handleUpdate=function(e,t){var a=t.target.value;n.setState(Object(c.a)({},e,a))},n.handleToggle=function(){n.setState({editableTitle:!n.editableTitle})},n.handleTitleEnterKey=function(e){13===(e.keyCode||e.which)&&n.setState({editableTitle:!n.state.editableTitle})},n.handleSubmit=function(){n.props.addProduct(n.state.title,[{qty:n.state.qty,unit:n.state.unit}]),n.setState(n.defaultState)},n.defaultState={editable:!1,editableTitle:!0,title:"",qty:0,unit:"kg"},n.state=n.defaultState,n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.editable?r.a.createElement("div",{className:"add-product-box"},r.a.createElement("h2",null,"adding a product"),this.state.editableTitle?r.a.createElement("div",null,r.a.createElement("label",null,"product name"),r.a.createElement("input",{value:this.state.title,onChange:function(t){return e.handleUpdate("title",t)},onKeyDown:function(t){return e.handleTitleEnterKey(t)}})):r.a.createElement("div",null,r.a.createElement("h2",{onClick:this.handleToggle},this.state.title)),r.a.createElement("div",null,r.a.createElement("label",null,"format:"),r.a.createElement("input",{type:"number",min:0,onChange:function(t){return e.handleUpdate("qty",t)}}),r.a.createElement("select",{onChange:function(t){return e.handleUpdate("unit",t)}},E.map(function(e){return r.a.createElement("option",null,e)}))),r.a.createElement("button",{className:"button",onClick:this.handleSubmit},"Submit"),r.a.createElement("p",{className:"cancel-button",onClick:this.handleEdit},"cancel")):r.a.createElement("h2",{className:"button",onClick:this.handleEdit},"<add a product>"))}}]),t}(r.a.Component)),V=Object(C.b)(null,{addProduct:function(e,t){return{type:"ADD_PRODUCT",payload:{product:e,formats:t}}}})(M),X=(n(47),function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleHover=function(e){n.setState(Object(c.a)({},e,!n.state[e]))};var a=g.a.keys(n.props.products);return n.initialState=g.a.zipObject(a,a.map(function(e){return!1})),n.state=n.initialState,n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.products,t={wrapper:{flexAlign:"row",display:"inline-block",cursor:"pointer"},content:{backgroundColor:"white",color:"#000",fontSize:"1.2rem",lineHeight:"150%"},tooltip:{backgroundColor:"white",borderRadius:"10px",bottom:"40%",left:"100%",opacity:"0.7"},arrow:{borderLeft:"solid white 5px"}};return r.a.createElement("div",{className:"ingredients-head"},r.a.createElement("h2",{className:"ingredients-list-title"},"Stored Ingredients:"),r.a.createElement(V,null),g.a.keys(e).map(function(n){return r.a.createElement(F,{content:r.a.createElement("div",null,r.a.createElement(G,{product:n,fmts:e[n]})),styles:t},"  ",r.a.createElement("p",{className:"product",id:n},n))}))}}]),t}(r.a.Component)),z=Object(C.b)(function(e){return{products:j(e)}})(X),W=(n(48),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleRemoveMeal=function(e){n.props.removeCell(e)},n.handleToggleEdit=function(e,t){return n.props.toggleField(e,t)},n.handleUpdateInput=function(e,t){var a=e.target.value,r=e.target.name;n.props.updateCell(t,r,a)},n.handleEnterKey=function(e,t){var a=e.keyCode||e.which,r="editable"+n.titleCase(e.target.name);13===a&&n.props.toggleField(t,r)},n.handleBlur=function(e,t){var a="editable"+n.titleCase(e.target.name);n.props.toggleField(t,a)},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"titleCase",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"render",value:function(){var e=this,t=this.props.cellID;return r.a.createElement("div",{className:"cell"},this.props.week[t]&&!0===this.props.week[t].editable?r.a.createElement("div",null,r.a.createElement("span",{className:"cross",onClick:function(){return e.handleRemoveMeal(t)}},"x"),!1===this.props.week[t].editableDish?r.a.createElement("h2",{onClick:function(){return e.handleToggleEdit(t,"editableDish")}},"Dish: "+this.props.week[t].dish):r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"dish",onKeyDown:function(n){return e.handleEnterKey(n,t)},onChange:function(n){return e.handleUpdateInput(n,t)},onBlur:function(n){return e.handleBlur(n,t)},list:"dishes",value:this.props.week.dish,autoFocus:!0}),r.a.createElement("datalist",{id:"dishes"},g.a.keys(this.props.recipes).map(function(e){return r.a.createElement("option",{value:e})}))),!1===this.props.week[t].editableServings?r.a.createElement("h2",{onClick:function(){return e.handleToggleEdit(t,"editableServings")}},"Servings:"+this.props.week[t].servings):r.a.createElement("input",{name:"servings",type:"number",value:this.props.week[t].servings,min:"1",step:"1",onKeyDown:function(n){return e.handleEnterKey(n,t)},onChange:function(n){return e.handleUpdateInput(n,t)},onFocus:function(e){return e.target.select()},onBlur:function(n){return e.handleBlur(n,t)},autoFocus:!0})):r.a.createElement("p",{className:"plus",onClick:function(){return e.props.addCell(t)}},"+"))}}]),t}(r.a.Component)),H=Object(C.b)(function(e){return{recipes:y(e),week:k(e)}},{addCell:function(e){return{type:"ADD_CELL",payload:{cellID:e}}},removeCell:function(e){return{type:"REMOVE_CELL",payload:{cellID:e}}},toggleField:function(e,t){return{type:"TOGGLE_FIELD",payload:{cellID:e,field:t}}},updateCell:function(e,t,n){return{type:"UPDATE_CELL",payload:{cellID:e,field:t,value:n}}}})(W),J=n(26),Q=function(e){var t=e.weekArray,n=(e.products,e.recipes),a=(e.week,t&&void 0!==t?t.map(function(e){var t=Object(R.a)(e,2),a=t[0],r=t[1];return n[a]?g.a.keys(n[a].ingredients).map(function(e){var t=n[a].ingredients[e];return[t.name,t.qty*(r/n[a].servings),n[a].ingredients[e].unit]}):a}):null),i=a&&void 0!==a?a.map(function(e){return g.a.isArray(e)?e.map(function(e){var t=Object(R.a)(e,3);return function(e,t,n){return f.weight.includes(n)?{name:e,qty:function(e,t){switch(t){case"gr":return e;case"kg":return function(e){return 1e3*e}(e);case"lb":return function(e){return 2204.623*e}(e);case"oz":return function(e){return.03527396*e}(e);case"tbsp - dry":return function(e){return 12.78*e}(e);case"tsp - dry":return function(e){return 4.92*e}(e);case"cup-dry":return function(e){return 138*e}(e);default:return null}}(t,n),unit:"gr"}:f.volume.includes(n)?{name:e,qty:function(e,t){switch(t){case"ml":return e;case"litre":return function(e){return 1e3*e}(e);case"cup":return function(e){return 284.131*e}(e);case"tbsp - liquid":return function(e){return 15*e}(e);case"tsp - liquid":return function(e){return 5*e}(e);default:return null}}(t,n),unit:"ml"}:(f.units.includes(n),{name:e,qty:t,unit:n})}(t[0],t[1],t[2])}):"#"+e+"#"}):null,l=(g.a.isArray(i)&&g.a.isObject(i[0])&&g()(i.flat()).groupBy("name").map(function(e,t){return{name:t,qty:g.a.sumBy(e,"qty")}}).value(),g.a.isArray(i)&&g.a.isObject(i[0])?i.flat().reduce(function(e,t){return(e[t.name]||(e[t.name]=[t.unit])).push(t.qty),e},[]):null),c=g.a.isArray(i)&&g.a.isObject(i[0])?g.a.keys(l).map(function(e){var t=Object(J.a)(l[e]);return[e,t[0],t.slice(1).reduce(function(e,t){return e+t},0)]}):null;return r.a.createElement("div",null,r.a.createElement("h2",null,"The total of ingredients is:"),r.a.createElement("div",null,a),r.a.createElement("h2",null,"Which translates to:"),r.a.createElement("h2",null," now combining:"),r.a.createElement("div",null,r.a.createElement("h1",{onClick:function(){return console.log(c)}},"click to try")),r.a.createElement(function(){return g.a.isArray(i)&&g.a.isObject(i[0])?r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"product"),r.a.createElement("td",null,"qty"),r.a.createElement("td",null,"unit")),g.a.keys(c).map(function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,c[e][0]),r.a.createElement("td",null,c[e][2]),r.a.createElement("td",null,c[e][1]))})))):r.a.createElement("h1",null,"oops")},null))},Y=Object(C.b)(function(e){var t;return{week:k(e),weekArray:(t=e,g.a.keys(k(t)).map(function(e){return[t.week[e].dish,t.week[e].servings]})),products:j(e),recipes:y(e)}})(function(e){var t=e.weekArray;return r.a.createElement("div",null,r.a.createElement("h2",{className:"button"},"Show me the shopping list for this week, please."),g.a.isEmpty(t)?r.a.createElement("p",null,"'waiting...'"):r.a.createElement(Q,{week:e.week,weekArray:e.weekArray,products:e.products,recipes:e.recipes}))}),Z=function(){return r.a.createElement("div",null)},$=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).mealsByDay=function(e){return g.a.keys(n.props.week).filter(function(t){return t.startsWith(e)})},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],n=g.a.max(t.map(function(t){return e.mealsByDay(t).length}));return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",{className:"top-bar"},t.map(function(e){return r.a.createElement("td",{className:"weekly-view-header"},r.a.createElement("h2",null,e))}))),r.a.createElement("tbody",null,r.a.createElement("tr",{className:"weekly-view-cell"},t.map(function(e){return r.a.createElement("td",null,r.a.createElement(H,{cellID:e+"-1",key:e+"-1"}))})),g.a.range(2,g.a.max([2,n+2])+1).map(function(n){return r.a.createElement("tr",{className:"weekly-view-cell"},t.map(function(t){return e.mealsByDay(t)&&e.mealsByDay(t).length+1>=n?r.a.createElement("td",null,r.a.createElement(H,{cellID:t+"-"+n,key:t+"-"+n})):r.a.createElement("td",null,r.a.createElement(Z,null))}))}))),r.a.createElement(Y,null))}}]),t}(r.a.Component),ee=Object(C.b)(function(e){return{week:k(e)}})($);var te=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h2",{className:"App-title"},"Weekly shopping")),r.a.createElement("div",{className:"controls"},r.a.createElement("div",null,r.a.createElement("div",{className:"recipes-panel"},r.a.createElement(q,null),r.a.createElement(B,null),r.a.createElement(K,null)),r.a.createElement("div",{className:"ingredientsDB"},r.a.createElement(ee,null))),r.a.createElement(z,null)))},ne=n(27),ae=n(10),re=n(23),ie=n(28),le=n.n(ie),ce=n(29),se=n.n(ce),oe={"rice pudding":{title:"rice pudding",servings:2,editableTitle:!1,editableServings:!1,ingredients:{1:{name:"rice",qty:50,unit:"gr",editable:null},2:{name:"unsalted butter",qty:25,unit:"gr",editable:null},3:{name:"whole milk",qty:500,unit:"ml",editable:null},4:{name:"caster sugar",qty:25,unit:"gr",editable:null}}},"mash potatoes":{title:"mash potatoes",editableTitle:!1,editableServings:!1,servings:5,ingredients:{1:{name:"potatoes",qty:1,unit:"kg",editable:null},2:{name:"whole milk",qty:250,unit:"ml",editable:null},3:{name:"salted butter",qty:50,unit:"gr",editable:null},4:{name:"salt",qty:2,unit:"gr",editable:null}}}},ue={selectedRecipe:{}},de=n(22),pe={recipe:{}},he=n(30),be={salt:[{qty:1,unit:"kg"},{qty:500,unit:"gr"}],rice:[{qty:1,unit:"kg"}],"unsalted butter":[{qty:250,unit:"gr"}],"salted butter":[{qty:250,unit:"gr"}],"whole milk":[{qty:1,unit:"litre"}],"semiskimmed milk":[{qty:1,unit:"litre"}],"caster sugar":[{qty:1,unit:"kg"}],potatoes:[{qty:2,unit:"kg"},{qty:3,unit:"kg"},{qty:5,unit:"kg"}]},me={};var ge=Object(ae.b)({recipes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_RECIPE":var n=t.payload,a=n.recipe,r=n.content;return Object(s.a)({},e,e.recipes,Object(c.a)({},a,r));default:return e}},selections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_RECIPE":var n=t.payload.recipe;return Object(s.a)({},e,{selectedRecipe:{recipe:n}});default:return e}},editedRecipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_RECIPE":return{recipe:t.payload.recipe};case"TOGGLE_TITLE":return Object(de.a)(t.payload),Object(s.a)({},e,{recipe:Object(s.a)({},e.recipe,{editableTitle:!e.recipe.editableTitle})});case"TOGGLE_SERVINGS":return Object(de.a)(t.payload),Object(s.a)({},e,{recipe:Object(s.a)({},e.recipe,{editableServings:!e.recipe.editableServings})});case"UPDATE_TITLE":var n=t.payload.title;return Object(s.a)({},e,{recipe:Object(s.a)({},e.recipe,{title:n})});case"UPDATE_SERVINGS":var a=t.payload.servings;return Object(s.a)({},e,{recipe:Object(s.a)({},e.recipe,{servings:a})});case"TOGGLE_TABLE":var r=t.payload,i=r.id,l=r.className;return Object(s.a)({},e,{recipe:Object(s.a)({},e.recipe,{ingredients:Object(s.a)({},e.recipe.ingredients,Object(c.a)({},i,Object(s.a)({},e.recipe.ingredients[i],{editable:l})))})});case"UPDATE_TABLE":var o=t.payload,u=o.id,d=o.className,p=o.value;return Object(s.a)({},e,{recipe:Object(s.a)({},e.recipe,{ingredients:Object(s.a)({},e.recipe.ingredients,Object(c.a)({},u,Object(s.a)({},e.recipe.ingredients[u],Object(c.a)({},d,p))))})});case"RESET_EDIT":return Object(s.a)({},e,{recipe:{}});case"ADD_INGREDIENT":var h=g.a.keys(e.recipe.ingredients).length;return Object(s.a)({},e,{recipe:Object(s.a)({},e.recipe,{ingredients:Object(s.a)({},e.recipe.ingredients,Object(c.a)({},h+1,{name:"new ingredient",qty:1,unit:"kg"}))})});default:return e}},pantry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PRODUCT":var n=t.payload,a=n.product,r=n.formats;return Object(s.a)({},e,Object(c.a)({},a,r));case"REMOVE_PRODUCT":var i=t.payload.product,l=Object.assign({},e);return delete l[i],l;case"UPDATE_PRODUCT_TITLE":var o=t.payload,u=o.product,d=o.newTitle;return e[d]=e[u],delete e[u],Object(s.a)({},e);case"ADD_FORMAT":var p=t.payload,h=p.product,b=p.qty,m=p.unit;return Object(s.a)({},e,Object(c.a)({},h,[].concat(Object(he.a)(e[h]),[{qty:b,unit:m}])));case"REMOVE_FORMAT":var g=t.payload,f=g.product,E=g.id;return Object(s.a)({},e,Object(c.a)({},f,e[f].filter(function(t){return e[f].indexOf(t)!==E})));default:return e}},week:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CELL":var n=t.payload.cellID;return Object(s.a)({},e,Object(c.a)({},n,{editable:!0,editableDish:!1,dish:"",editableServings:!1,servings:1}));case"REMOVE_CELL":var a=t.payload.cellID,r=a.split("-")[0],i=g.a.keys(e).filter(function(e){return e.split("-")[0]===r}).filter(function(e){return parseInt(e.split("-")[1])>parseInt(a.split("-")[1])}),l=Object.assign({},e);return delete l[a],g.a.keys(l).map(function(e){i.includes(e)&&(l[function(e){var t=e.split("-");return t[0]+"-"+(t[1]-1)}(e)]=l[e],delete l[e])}),Object(s.a)({},l);case"TOGGLE_FIELD":var o=t.payload,u=o.cellID,d=o.field;return Object(s.a)({},e,Object(c.a)({},u,Object(s.a)({},e[u],Object(c.a)({},d,!e[u][d]))));case"UPDATE_CELL":var p=t.payload,h=p.cellID,b=p.field,m=p.value;return Object(s.a)({},e,Object(c.a)({},h,Object(s.a)({},e[h],Object(c.a)({},b,m))));default:return e}}}),fe={key:"root",storage:le.a,stateReconciler:se.a,blacklist:["recipes","week","pantry"]},Ee=Object(re.a)(fe,ge),ve=Object(ae.c)(Ee,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),ye=Object(re.b)(ve);l.a.render(r.a.createElement(C.a,{store:ve},r.a.createElement(ne.a,{loading:null,persistor:ye},r.a.createElement(te,null))),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.6ea1373d.chunk.js.map