{"version":3,"sources":["logo.svg","components/RecipeTopLevel.js","constants/shared.js","constants/placeholders.js","redux/selectors.js","components/RecipeIngredientsTable.js","components/NewRecipeIngredientsTable.js","components/SubmitRecipe.js","redux/actions.js","redux/actionTypes.js","utilities/parsers.js","components/NewRecipe.js","components/RecipeList.js","components/EditRecipe.js","components/Select.js","components/Controller.js","components/Tooltip.js","components/Product.js","components/AddProduct.js","components/IngredientsDB.js","components/Cell.js","components/ShoppingList.js","utilities/unitConversion.js","components/WeeklyView.js","App.js","redux/reducers/recipes.js","redux/reducers/selections.js","redux/reducers/edited.js","redux/reducers/pantry.js","redux/reducers/week.js","redux/reducers/index.js","redux/store.js","index.js"],"names":["module","exports","__webpack_require__","p","RecipeTopLevel","_this","this","react_default","a","createElement","className","props","topBar","editableTitle","onChange","e","onUpdateTitle","target","value","onKeyDown","onTitleEnterKey","onBlur","onTitleBlur","title","onFocus","select","autoFocus","required","onClick","onTitleClick","editableServings","onUpdateServings","onServingsEnterKey","onServingsBlur","servings","type","min","step","onServingsClick","React","Component","unitsMap","weight","volume","units","_","keys","map","category","unit","flat","editRecipeTitlePH","getRecipes","store","recipes","getSelectedFromRecipes","selectedRecipeTitle","selections","selectedRecipe","recipe","getSelectedRecipe","values","filter","getSelectedToEdit","getProducts","pantry","getWeek","week","RecipeIngredientsTable","ingredients","onAddIngredient","Object","k","key","editable","id","list","name","onTableChange","onTableEnterKey","onTableBlur","product","onTableClick","qty","u","connect","state","NewRecipeIngredientsTable","components_RecipeIngredientsTable","SubmitRecipe","handleSubmit","_entries","entries","_values","alert","v","length","constructor","addRecipe","onSubmitReset","content","payload","inputParsers","date","input","_input$split","split","_input$split2","slicedToArray","month","day","year","concat","uppercase","toUpperCase","integer","parseInt","float","parseFloat","NewRecipe","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleTitleClick","setState","handleTitleEnterKey","keyCode","which","handleTitleBlur","updateTitle","handleServingsClick","handleServingsEnterKey","handleServingsBlur","updateServings","handleAddIngredient","nextid","objectSpread","defineProperty","handleTableClick","event","idx","handleTableEnterKey","handleTableBlur","handleTableChange","handleSubmitReset","defaultState","RecipeTopLevel_RecipeTopLevel","NewRecipeIngredientsTable_NewRecipeIngredientsTable","components_SubmitRecipe","RecipeList","handleClick","setTimeout","selectRecipe","editRecipe","selected","_this2","EditRecipe","handleGetIngredients","handleGetServings","handleGetTitle","innerHTML","toggleTitle","handleUpdateTitle","edited","toggleServings","handleUpdateServings","toggleTable","updateTable","addIngredient","handleResetEdit","resetEdit","EditRecipe_EditRecipeIngredientsTable","EditRecipeIngredientsTable","editedRecipe","Select","selectedElement","createRef","_this$props","children","open","cloneElement","ref","displayName","Tooltip","styles","wrapper","position","display","zIndex","color","cursor","tooltip","minWidth","maxWidth","background","bottom","left","marginBottom","padding","WebkitTransform","msTransform","OTransform","transform","fontSize","arrow","width","height","marginLeft","borderLeft","borderRight","borderTop","gap","mergeStyles","userStyles","forEach","assign","show","setVisibility","hide","visible","handleTouch","assignOutsideTouchHandler","document","addEventListener","handler","currentNode","componentNode","ReactDOM","findDOMNode","refs","instance","parentNode","removeEventListener","onMouseEnter","onMouseLeave","onTouchStart","style","Product","handleToggleEdit","handleUpdateInput","handleOnEnter","productTitle","updateProductTitle","editableProductTitle","addFormat","handleRemoveProduct","window","confirm","removeProduct","handleRemoveFormat","removeFormat","fmts","fmt","indexOf","products","newTitle","AddProduct","handleEdit","handleUpdate","handleToggle","addProduct","formats","IngredientsDB","handleHover","initialState","zipObject","whiteRoundedStyle","flexAlign","backgroundColor","lineHeight","borderRadius","opacity","src_components_AddProduct","Tooltip_Tooltip","src_components_Product","Cell","handleRemoveMeal","removeCell","cellID","field","toggleField","updateCell","handleEnterKey","titleCase","handleBlur","string","charAt","slice","editableDish","dish","addCell","CalcDishes","weekArray","allMeals","undefined","_ref","_ref2","ingredient","ingredientInRecipe","converted","isArray","_ref3","_ref4","includes","convertKgGr","convertLbGr","convertOzGr","convertTsbpGr","convertTspGr","convertCupGr","weightToGramms","convertLitreMl","convertCupMl","convertTbspMl","convertTspMl","volumeToMl","unitConverter","combined","isObject","groupBy","objs","sumBy","reduce","c","push","summed","_combined$product","toArray","console","log","i","isEmpty","ShoppingList_CalcDishes","EmptyCell","WeeklyView","mealsByDay","weekday","entry","startsWith","weekdays","longestColumn","max","cell","src_components_Cell","range","row","WeeklyView_EmptyCell","components_ShoppingList","App","NewRecipe_NewRecipe","src_components_RecipeList","components_EditRecipe","components_WeeklyView","src_components_IngredientsDB","rice pudding","1","2","3","4","mash potatoes","salt","rice","unsalted butter","salted butter","whole milk","semiskimmed milk","caster sugar","potatoes","combineReducers","arguments","action","_action$payload","objectDestructuringEmpty","_action$payload2","existingIngredients","newState","_action$payload3","toConsumableArray","_action$payload4","biggerThanRemoved","splitKey","renameKey","persistConfig","storage","stateReconciler","autoMergeLevel2","blacklist","pReducer","persistReducer","rootReducer","createStore","__REDUX_DEVTOOLS_EXTENSION__","persistor","persistStore","render","es","integration_react","loading","src_App","getElementById"],"mappings":"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","file":"static/js/main.6ea1373d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import React from 'react'  ;\nimport PropTypes from 'prop-types';\n\nexport default class RecipeTopLevel extends React.Component {\n  render() {\n    return(\n      <div className='new-recipe'>\n        <form>\n      <h2 className='top-bar'>{this.props.topBar}</h2>\n        {this.props.editableTitle ?\n          <input\n            className=\"rename-list\"\n            onChange={e => this.props.onUpdateTitle(e.target.value)}\n            onKeyDown={this.props.onTitleEnterKey}\n            onBlur={this.props.onTitleBlur}\n            value={this.props.title}\n            onFocus={e => e.target.select()}\n            autoFocus\n            required>\n          </input>\n          :\n          <div>\n            <h2>\n              <span onClick={this.props.onTitleClick}\n                    className=\"recipe-title\"\n              >{this.props.title === '' ?\n                '<Recipe-Name>':\n                this.props.title}\n              </span>\n            </h2>\n          </div>}\n\n        <div \n          className='servings'>\n          {this.props.editableServings ?\n            <input onChange={e => this.props.onUpdateServings(e.target.value)}\n                   onKeyDown={this.props.onServingsEnterKey}\n                   onBlur={this.props.onServingsBlur}\n                   value={this.props.servings}\n                   type='number'\n                   min='1'\n                   step='1'\n                   onFocus={e => e.target.select()}\n                   autoFocus></input>\n            :\n            <h2 className='servings' onClick={this.props.onServingsClick}> Serves: .... {this.props.servings}</h2>}\n      </div>\n      </form>\n      </div>);\n  }\n}\n\nRecipeTopLevel.propTypes = {\n  servings: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired\n};\n","import _ from 'lodash';\n\nexport const unitsMap = {\n\tweight: [\n\t\t'kg',\n\t\t'gr',\n\t\t'oz',\n\t\t'lb',\n\t\t'tbsp - dry',\n\t\t'tsp - dry',\n\t\t'cup - dry'\n\t],\n\tvolume: [\n\t\t'litre',\n\t\t'ml',\n\t\t'pint',\n\t\t'oz - liquid',\n\t\t'tbsp - liquid',\n\t\t'tsp - liquid',\n\t\t'cup - liquid',\n\t],\n\tunits: [\n\t\t'unit'\n\t]\n};\n\nexport const units =\n\t(_.keys(unitsMap).map(category =>\n\tunitsMap[category].map(unit =>\n\t\tunit))).flat(); \n\n\nexport const unitSet = ['kg', 'gr', 'ml', 'litre', 'tsp', 'tbsp', 'cup', 'lbs', 'oz', 'units' ];\n","//namespace for place holders that are being reused in the app. \n//like editRecipeTitlePH that is refered to also as an argument in later conditionals\n\nexport const editRecipeTitlePH = 'pick a recipe to edit';\n\n","import _ from 'lodash';\nimport { editRecipeTitlePH } from '../constants/placeholders';\n\nexport const getRecipes = store => store.recipes;\n\nexport const getEdited = store =>\n\tstore.editedRecipe.recipe ?\n\tstore.editedRecipe.recipe :\n\t{};\n\nexport const getSelectedRecipe = store => \n\tstore.selections.selectedRecipe.recipe ?\n\tstore.selections.selectedRecipe.recipe :\n\teditRecipeTitlePH;\n\nexport const getSelectedFromRecipes = store => {\n\tconst recipes = getRecipes(store);\n\tconst selectedRecipeTitle = getSelectedRecipe(store);\n\treturn _.values(recipes).filter(recipe => (recipe.title === selectedRecipeTitle));\n};\n\nexport const getSelectedServings = store => {\n\treturn( \n\t\tstore.selections.selectedRecipe.recipe && store.recipes ?\n\t\t\t_.values(getSelectedFromRecipes(store))[0].servings :\n\t\t\t'' );};\n\nexport const getSelectedIngredients = store => {\n\treturn (\n\t\tstore.selections.selectedRecipe.recipe && store.recipes ?\n\t\t\t_.values(getSelectedFromRecipes(store))[0].ingredients :\n\t\t\t{}\n\t);\n};\n\nexport const getSelectedEditableServings = store => {\n\treturn( \n\t\tstore.selections.selectedRecipe.recipe && store.recipes ?\n\t\t\t_.values(getSelectedFromRecipes(store))[0].editablservings :\n\t\t\t'' );};\n\nexport const getSelectedEditableTitle = store => {\n\treturn( \n\t\tstore.selections.selectedRecipe.recipe && store.recipes ?\n\t\t\t_.values(getSelectedFromRecipes(store))[0].editableTitle :\n\t\t\t'' );};\n\nexport const getSelectedToEdit = store => {\n\treturn (\n\t\tstore.selections.selectedRecipe.recipe && store.recipes ?\n\t\t\t_.values(getSelectedFromRecipes(store))[0] : {}\n\t);};\n\nexport const getProducts = store => {\n\treturn (\n\t\tstore.pantry);\n};\n\nexport const getWeek = store => \n\t\tstore.week;\n\nexport const getWeekArray = store => \n\t_.keys(getWeek(store)).map(key =>  (\n\t\t[store.week[key].dish,\n\t\tstore.week[key].servings\n\t])\n\t);\n\t\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { units } from '../constants/shared';\nimport { getProducts } from '../redux/selectors';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nclass RecipeIngredientsTable extends React.Component {\n\t\n  render(props) {\n    const ingredients = this.props.ingredients;\n\n    return(\n      <div>\n        <div> <input className='button'\n                     type='submit'\n                     value='Add ingredient'\n                     onClick={this.props.onAddIngredient}\n              />\n        </div>\n        <table className='new-ingredients-table'>\n          <tbody>\n            <tr>\n              <th>ingredient</th>\n              <th>Qty.</th>\n              <th>Unit</th>\n            </tr>\n            {Object.keys(ingredients).map((k) => (\n              <tr key={'ingredient-row-' + k}>\n                {ingredients[k].editable === 'name' ?\n                  <td><input\n                        className='name'\n                        id={k}\n                        list='pantry'\n                        value={ingredients[k].name}\n                        onChange={e => this.props.onTableChange(e)}\n                        onKeyDown={this.props.onTableEnterKey}\n                        onBlur={this.props.onTableBlur}\n                        onFocus={e => e.target.select()}\n                        autoFocus />\n                    <datalist id='pantry'>\n                      {_.keys(this.props.pantry).map(\n                        product => <option>{product}</option>)}\n                    </datalist>\n                 </td> :\n                  <td\n                    id={k}\n                    className='name'\n                    onClick={this.props.onTableClick}\n                  >{ingredients[k].name}</td> }\n                \n                <td>\n                  {ingredients[k].editable === 'qty' ?\n                    <input\n                      className='qty'\n                      id={k}\n                      type='number'\n                      min='0'\n                      value={ingredients[k].qty}\n                      onChange={e => this.props.onTableChange(e)}\n                      onKeyDown={this.props.onTableEnterKey}\n                      onBlur={this.props.onTableBlur}\n                      onFocus={e => e.target.select()}\n                      autoFocus\n                      required></input> :\n                    <span\n                      id={k}\n                      className='qty'\n                      onClick={this.props.onTableClick}\n                    >{ingredients[k].qty}</span> }\n                </td>\n                <td\n                  \n                >{ingredients[k].editable === 'unit' ?\n                  <select\n                    type='list'\n                    name='unit'\n                    className='unit'\n                    id={k}\n                    onChange={this.props.onTableChange}\n                    onBlur={this.props.onTableBlur}>\n                    {units.map((u) => (<option key={'unit-list-item-' + u} >{u}</option>))}\n                  </select>\n                  :\n                  <span\n                    id={k}\n                    className='unit'\n                    onClick={this.props.onTableClick}\n                  >{ingredients[k].unit}</span> }</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>);\n  }\n}\n\nRecipeIngredientsTable.propTypes = {\n  qty: PropTypes.number,\n  unit: PropTypes.string,\n  name: PropTypes.string\n  \n};\n\nconst mapToProps = state => {\n  const pantry = getProducts(state);\n  return {\npantry\n  };\n};\n\nexport default connect(mapToProps)(RecipeIngredientsTable);\n","import React from 'react';\nimport RecipeIngredientsTable from './RecipeIngredientsTable';\n\nexport default class NewRecipeIngredientsTable extends React.Component {\n\n\n\trender(props) {\n    return(\n      <div>\n        <RecipeIngredientsTable\n        onAddIngredient={this.props.onAddIngredient}\n          ingredients={this.props.ingredients}\n          onTableChange={this.props.onTableChange}\n          onTableClick={this.props.onTableClick}\n          onTableEnterKey={this.props.onTableEnterKey}\n          onTableBlur={this.props.onTableBlur}/>\n      </div>\n\t  );\n  }\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { addRecipe } from '../redux/actions.js';\nimport _ from 'lodash';\n\nclass SubmitRecipe extends React.Component {\n  \n  handleSubmit = (props) => {\n    const title = this.props.title;\n    const servings = this.props.servings;\n    const ingredients = this.props.ingredients;\n    const _entries = _.entries(ingredients);\n    const _values = _.values(ingredients); \n    //check that title has a value\n    if (title === '')\n    { alert('Please supply a recipe name'); }\n    //check that ingredient object is not empty and `name` property was given a value.\n    else if ( _values.filter((v) => (v.name === 'new ingredient')).length > 0) {\n      alert ( 'Please supply an ingredient name' );\n    } else if ( _entries.length === 0 && ingredients.constructor === Object){\n      alert ( 'Please supply ingredients');\n    } else {\n      this.props.addRecipe(\n        title, {\n          title: title,\n          editableTitle: false,\n          servings: servings,\n          editableServings: false,\n          ingredients: ingredients});\n      this.props.onSubmitReset();\n    };\n  }\n\n  render() {\n    return(\n      <div>\n        <button\n          className='button'\n      /* onClick={this.handleSubmit} */\n          onClick={this.handleSubmit}\n        >submit</button>\n      </div>);\n  }\n}\n\n\n\n\nexport default connect(null, { addRecipe })(SubmitRecipe);\n","import { ADD_RECIPE, SELECT_RECIPE, TOGGLE_TITLE, TOGGLE_SERVINGS, UPDATE_TITLE, UPDATE_SERVINGS, EDIT_RECIPE, TOGGLE_TABLE, UPDATE_TABLE, RESET_EDIT, ADD_INGREDIENT, ADD_PRODUCT, REMOVE_PRODUCT, UPDATE_PRODUCT_TITLE, ADD_FORMAT, REMOVE_FORMAT, ADD_CELL, REMOVE_CELL, TOGGLE_FIELD, UPDATE_CELL } from './actionTypes';\n\n// let nextRecipeId = 1;\n\nexport const addRecipe = ( recipe, content ) => ({\n\t\ttype: ADD_RECIPE,\n\t\tpayload: {\n\t\t\t\trecipe,\n\t\t\t\tcontent\n\t\t}\n});\n\nexport const selectRecipe = ( recipe ) => ({\n\ttype: SELECT_RECIPE,\n\tpayload: {\n\t\trecipe}\n});\n\n\nexport const toggleTitle = ( title ) => ({\n\ttype: TOGGLE_TITLE,\n\tpayload: {\n\t\ttitle}\n});\n\nexport const toggleServings = ( title, servings ) => ({\n\ttype: TOGGLE_SERVINGS,\n\tpayload: {\n\t\ttitle,\n\t\tservings}\n});\n\nexport const updateTitle = ( title ) => ({\n\ttype: UPDATE_TITLE,\n\tpayload: {\n\t\ttitle}\n});\n\nexport const updateServings = ( servings ) => ({\n\ttype: UPDATE_SERVINGS,\n\tpayload: {\n\t\tservings}\n});\n\nexport const editRecipe = ( recipe ) => ({\n\ttype: EDIT_RECIPE,\n\tpayload: {\n\t\trecipe\n\t}\n});\n\nexport const toggleTable = ( id, className ) => ({\n\ttype: TOGGLE_TABLE,\n\tpayload: {\n\t\tid,\n\t\tclassName}\n\t});\n\nexport const updateTable = ( id, className, value ) => ({\n\ttype: UPDATE_TABLE,\n\tpayload: {\n\t\tid,\n\t\tclassName,\n\t\tvalue}\n});\n\nexport const resetEdit = () => ({\n\ttype: RESET_EDIT\n});\n\nexport const addIngredient = () => ({\n\ttype: ADD_INGREDIENT\n});\n\n\nexport const addProduct = ( product, formats ) => ({\n\ttype: ADD_PRODUCT,\n\tpayload: {\n\t\tproduct,\n\t\tformats\n\t}\n});\n\nexport const removeProduct = ( product ) => ({\n\ttype: REMOVE_PRODUCT,\n\tpayload: {\n\t\tproduct\n\t}\n});\n\nexport const updateProductTitle = ( product, newTitle ) => ({\n\ttype: UPDATE_PRODUCT_TITLE,\n\tpayload: {\n\t\tproduct,\n\t\tnewTitle\n\t}\n});\n\nexport const addFormat = ( product, qty, unit ) => ({\n\ttype: ADD_FORMAT,\n\tpayload: {\n\t\tproduct,\n\t\tqty,\n\t\tunit\n\t}\n});\n\nexport const removeFormat = ( product, id ) => ({\n\ttype: REMOVE_FORMAT,\n\tpayload: {\n\t\tproduct,\n\t\tid\n\t}\n});\n\nexport const addCell = ( cellID ) => ({\n\ttype: ADD_CELL,\n\tpayload: {\n\t\tcellID}\n});\n\nexport const removeCell = ( cellID ) => ({\n\ttype: REMOVE_CELL,\n\tpayload: {\n\t\tcellID }\n});\n\nexport const toggleField = ( cellID, field ) => ({\n\ttype: TOGGLE_FIELD,\n\tpayload: {\n\t\tcellID,\n\t\tfield}\n});\n\nexport const updateCell = ( cellID, field, value ) => ({\n\ttype: UPDATE_CELL,\n\tpayload: {\n\t\tcellID,\n\t\tfield,\n\t\tvalue}\n});\n\t\n","export const ADD_RECIPE = \"ADD_RECIPE\";\nexport const SELECT_RECIPE = \"SELECT_RECIPE\";\nexport const TOGGLE_TITLE = \"TOGGLE_TITLE\";\nexport const TOGGLE_SERVINGS = \"TOGGLE_SERVINGS\";\nexport const UPDATE_TITLE = \"UPDATE_TITLE\";\nexport const UPDATE_SERVINGS = \"UPDATE_SERVINGS\";\nexport const EDIT_RECIPE = \"EDIT_RECIPE\";\nexport const TOGGLE_TABLE = \"TOGGLE_TABLE\";\nexport const UPDATE_TABLE = \"UPDATE_TABLE\";\nexport const RESET_EDIT = \"RESET_EDIT\";\nexport const ADD_INGREDIENT = \"ADD_INGREDIENT\";\nexport const ADD_PRODUCT = \"ADD_PRODUCT\";\nexport const REMOVE_PRODUCT = \"REMOVE_PRODUCT\";\nexport const ADD_FORMAT = \"ADD_FORMAT\";\nexport const REMOVE_FORMAT = \"REMOVE_FORMAT\";\nexport const ADD_CELL = \"ADD_CELL\";\nexport const REMOVE_CELL = \"REMOVE_CELL\";\nexport const TOGGLE_FIELD = \"TOGGLE_FIELD\";\nexport const UPDATE_CELL = \"UPDATE_CELL\";\nexport const UPDATE_PRODUCT_TITLE = \"UPDATE_PRODUCT_TITLE\";\n","export const inputParsers = {\n  date(input) {\n    const [month, day, year] = input.split('/');\n    return `${year}-${month}-${day}`;\n  },\n  uppercase(input) {\n    return input.toUpperCase();\n  },\n\tinteger(input) {\n\t\treturn parseInt(input);\n  },\n\tfloat(input) {\n\t\treturn parseFloat(input);\n\t}\n};\n\n\n\n","import React from 'react';\nimport RecipeTopLevel from './RecipeTopLevel';\nimport NewRecipeIngredientsTable from './NewRecipeIngredientsTable';\nimport SubmitRecipe from './SubmitRecipe';\nimport { inputParsers }  from '../utilities/parsers';\n// import { addRecipe } from '../redux/reducers/index.js';\n\nexport default class NewRecipe extends React.Component {\n\n  constructor (props) {\n    super(props);\n    this.nextid = 0;  //for the counter to work the let must be defined outside of the handler  \n    this.defaultState = {\n      editableTitle: false,\n      title: '',\n      editableServings: false,\n      servings: 1,\n      ingredients: {},\n      list: []\n    };\n    this.state = this.defaultState;\n    \n  }\n  \n  handleTitleClick = () => \n    this.setState({editableTitle: !this.state.editableTitle});\n\n  handleTitleEnterKey = (e) => {\n    const keyCode = e.keyCode || e.which;\n    if (keyCode === 13) {\n      this.setState({editableTitle: !this.state.editableTitle});\n    }}\n\n  handleTitleBlur = () => \n    this.state.editableTitle ?\n    this.setState({editableTitle: !this.state.editableTitle}) : null;\n\n  updateTitle = title => {\n    this.setState({ title });\n  }\n\t\n  handleServingsClick = () => {\n    this.setState({editableServings: !this.state.editableServings});\n  }\n\n  handleServingsEnterKey = (e) => {\n    const keyCode = e.keyCode || e.which;\n    if (keyCode === 13) {\n      this.setState({editableServings: !this.state.editableServings});\n    }}\n\n  handleServingsBlur = () => \n    this.state.editableServings ?\n    this.setState({editableServings: !this.state.editableServings}) : null;\n\n  updateServings = servings => {\n    this.setState({ servings: inputParsers.integer(servings) });\n  }\n\n  handleAddIngredient = () => {\n    let id = ++this.nextid;\n    this.setState({ingredients: {...this.state.ingredients, [id]: { name: 'new ingredient', qty: 1, unit: 'kg', editable: null}}});\n  }\n\n  handleTableClick  = (event) => {\n    const ingredients = this.state.ingredients;\n    const target = event.target;\n    const className = target.className;\n    let idx = parseInt(target.id);\n    this.setState({ingredients:\n      {...ingredients, [idx]: {...ingredients[idx] , editable: className}}});\n\t}\n\n  handleTableEnterKey = (event) => {\n    const  ingredients = this.state.ingredients;\n    const target = event.target;\n    let idx = parseInt(target.id);\n    const keyCode = event.keyCode || event.which;\n    if (keyCode === 13) {\n      this.setState({ingredients:\n        {...ingredients, [idx]: {...ingredients[idx] , editable: null}}});\n    }\n  }\n\n  handleTableBlur = (event) => {\n    const  ingredients = this.state.ingredients;\n    const target = event.target;\n    let idx = parseInt(target.id);\n    this.setState({ingredients:\n      {...ingredients, [idx]: {...ingredients[idx] , editable: null}}});\n  }\n\t\n  handleTableChange = (event) => {\n\n    const target = event.target;\n    const value = target.value;\n    const idx = parseInt(target.id);\n    const ingredients = this.state.ingredients;\n    const className = target.className;    \n\t\t  switch (className) {\n        case 'qty':\n          this.setState({ingredients:\n            {...ingredients, [idx]: {...ingredients[idx] ,\n              [className]: inputParsers.float(value) }}});\n\t\t\t\t  break;\n\t\t\t  default:\n\t\t\t\t  this.setState({ingredients:\n            {...ingredients, [idx]: {...ingredients[idx] ,\n              [className]: value }}});\n\t\t  }\n    }\n  ;\n  \n  \n\n  handleSubmitReset = () =>\n    this.setState({...this.defaultState});\n  \n  \n  render() {\n    return (\n      <div className='new-recipe'>\n        <RecipeTopLevel\n          topBar={'Add new recipe'}\n          editableTitle={this.state.editableTitle}\n          editableServings={this.state.editableServings}\n          title={this.state.title}\n          onTitleClick={this.handleTitleClick}\n          onTitleEnterKey={this.handleTitleEnterKey}\n          onTitleBlur={this.handleTitleBlur}\n          onUpdateTitle={this.updateTitle}\n          servings={this.state.servings}\n          onServingsClick={this.handleServingsClick}\n          onServingsEnterKey={this.handleServingsEnterKey}\n          onServingsBlur={this.handleServingsBlur}\n          onUpdateServings={this.updateServings}/>\n\n\n        <NewRecipeIngredientsTable\n          onAddIngredient={this.handleAddIngredient}\n          ingredients={this.state.ingredients}\n          onTableChange={this.handleTableChange}\n          onTableClick={this.handleTableClick}\n          onTableEnterKey={this.handleTableEnterKey}\n          onTableBlur={this.handleTableBlur}\n        />\n        <div>\n          <SubmitRecipe\n            title={this.state.title}\n            servings={this.state.servings}\n            ingredients={this.state.ingredients}\n            onSubmitReset={this.handleSubmitReset}/>\n        </div>\n      </div>\n    );\n  }\n  \n}\n","import React from 'react';\nimport './RecipeList.css';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport { editRecipe, selectRecipe } from '../redux/actions';\nimport { getSelectedToEdit } from '../redux/selectors';\nclass  RecipeList extends React.Component {\n\n  handleClick = (recipe) => {\n    setTimeout(() => {\n    this.props.selectRecipe(recipe);\n      this.props.editRecipe(this.props.selected);}, 100);\n  }\n  \n  render (){\n    const recipes = this.props.recipes;\n\n\t\treturn(\n\t\t\t<div className='recipe-list'>\n        <h2 className='title'>The recipes</h2>\n        <div className='recipe-list-block'>\n          {_.keys(recipes).map((id) =>\n            <button className='recipe-list-item'\n                    key={'recipe-' + id}\n                    onClick={() => this.handleClick(id)}\n            >{id}</button>)}  \n        </div>\n      </div>\n    );\n\t}\n}\n\n\n//REACT_REDUX BIT:\n\nfunction mapStateToProps(state) {\n  return {\n    recipes: state.recipes,\n    selected: getSelectedToEdit(state)\n  };\n}\n\nexport default connect(mapStateToProps, { editRecipe, selectRecipe })(RecipeList);\n","import  React  from 'react';\nimport { connect } from 'react-redux';\nimport _ from  'lodash';\nimport RecipeTopLevel from './RecipeTopLevel.js';\nimport RecipeIngredientsTable from './RecipeIngredientsTable';\nimport SubmitRecipe from './SubmitRecipe';\nimport { toggleTitle, toggleServings, updateTitle, updateServings, toggleTable, updateTable, resetEdit, addIngredient } from '../redux/actions';\nimport { getEdited } from '../redux/selectors';\nimport { editRecipeTitlePH } from '../constants/placeholders';\nimport { inputParsers } from '../utilities/parsers';\nclass EditRecipe extends React.Component {\n\n  handleGetIngredients = ( ingredients ) =>\n    ingredients ?\n    ingredients  :\n    {};\n\n  handleGetServings = ( servings ) =>\n    servings ?\n    servings : 0;\n\n  handleGetTitle = ( title ) =>\n    title || title === '' ?\n    title :\n    editRecipeTitlePH;\n  \n  handleTitleClick = (e) =>\n    e.target.innerHTML !== editRecipeTitlePH ?\n    this.props.toggleTitle(e.target.innerHTML) :\n    null;\n\n  handleUpdateTitle = ( title ) => {\n    this.props.updateTitle( title );\n  }\n \n  handleTitleEnterKey = (e) => {\n    const keyCode = e.keyCode || e.which;\n    if (keyCode === 13) {\n      this.props.toggleTitle();\n    }}\n\n    handleTitleBlur = () =>\n    this.props.edited.editableTitle ?\n    this.props.toggleTitle() : null;\n\n  \n  handleServingsEnterKey = (e) => {\n    const keyCode = e.keyCode || e.which;\n    if (keyCode === 13) {\n      this.props.toggleServings();\n    }}\n\n  \n  handleServingsClick = ( servings ) =>\n    servings !== 0 ?\n    this.props.toggleServings() :\n    null;\n\n  handleUpdateServings =  servings  =>\n    this.props.updateServings( inputParsers.integer(servings) );\n\n  handleServingsBlur = () =>\n    this.props.edited.editableServings ?\n    this.props.toggleServings() : null;\n\n  handleTableClick  = (event) => {\n    const ingredients = this.props.edited.ingredients;\n    const target = event.target;\n    const className = target.className;\n    let idx = parseInt(target.id);\n    this.props.toggleTable( idx, className );\n\t}\n\n    handleTableEnterKey = (event) => {\n    const  ingredients = this.props.edited.ingredients;\n    const target = event.target;\n    let idx = parseInt(target.id);\n    const keyCode = event.keyCode || event.which;\n      if (keyCode === 13) {\n        this.props.toggleTable( idx, null );\n    }\n  }\n\n    handleTableBlur = (event) => {\n    const  ingredients = this.props.edited.ingredients;\n    const target = event.target;\n    let idx = parseInt(target.id);\n      this.props.toggleTable( idx, null );\n    }\n\n    handleTableChange = (event) => {\n    const target = event.target;\n    const value = target.value;\n    const idx = parseInt(target.id);\n    const ingredients = this.props.edited.ingredients;\n    const className = target.className;    \n\t\t  switch (className) {\n        case 'qty':\n          this.props.updateTable(idx, className, inputParsers.float(value));\n\t\t\t\t  break;\n\t\t\t  default:\n          this.props.updateTable(idx, className, value);\n\t\t  }\n    }\n  ;\n\n  handleAddIngredient = () =>\n    this.props.addIngredient();\n  \n  handleResetEdit = () =>\n    this.props.resetEdit();\n\n  \n\trender(props) {\n\n\t\treturn (\n        <div className='edit-recipe'>\n          <RecipeTopLevel\n            topBar={'Edit recipe'}\n            title={this.handleGetTitle(this.props.edited.title)}\n            editableTitle={this.props.edited.editableTitle}\n            editableServings={this.props.edited.editableServings}\n            servings={this.handleGetServings(this.props.edited.servings)}\n            onTitleClick={this.handleTitleClick}\n            onTitleEnterKey={this.handleTitleEnterKey}\n            onTitleBlur={this.handleTitleBlur}\n            onUpdateTitle={this.handleUpdateTitle}\n            onServingsClick={() => this.handleServingsClick(this.props.edited.servings)}\n            onUpdateServings={this.handleUpdateServings}\n            onServingsEnterKey={this.handleServingsEnterKey}\n            onServingsBlur={this.handleServingsBlur}\n          />\n          <EditRecipeIngredientsTable\n            key={'ingredients-' + this.props.edited.title}\n            ingredients={this.handleGetIngredients(this.props.edited.ingredients)}\n            onTableClick={this.handleTableClick}\n            onTableEnterKey={this.handleTableEnterKey}\n            onTableBlur={this.handleTableBlur}\n            onTableChange={this.handleTableChange}\n            onAddIngredient={this.handleAddIngredient}\n      /* {this.handleGetIngredients} */\n          />\n          <SubmitRecipe\n            title={this.props.edited.title}\n            servings={this.props.edited.servings}\n            ingredients={this.props.edited.ingredients}\n            onSubmitReset={this.handleResetEdit}\n          />\n          <button\n            className='button'\n            onClick= {this.handleResetEdit}\n          >Cancel</button>\n        </div>\n      \n    );\n  }\n}\n\nclass EditRecipeIngredientsTable extends React.Component {\n\n\trender(props) {\n    return(\n      <div>\n        <RecipeIngredientsTable\n          onAddIngredient={this.props.onAddIngredient}\n          ingredients={this.props.ingredients}\n          onTableChange={this.props.onTableChange}\n          onTableClick={this.props.onTableClick}\n          onTableEnterKey={this.props.onTableEnterKey}\n          onTableBlur={this.props.onTableBlur}\n        />\n      </div>\n\t  );\n  }\n}\n\n//REACT-REDUX\n\nconst mapStateToProps = state => {\n  // const { selectedRecipe, recipes } = state;\n  const edited = getEdited(state);\n  // const ingredients = {1:{name: 'foo', unit: 'kg', qty: 99}};\n  return {\n    edited\n  };\n};\n\nexport default connect(mapStateToProps, { toggleTitle, toggleServings, updateTitle, updateServings, toggleTable, updateTable, resetEdit, addIngredient })(EditRecipe);\n\n\n\n","import React from 'react';\n\nclass Select extends React.Component{\n  static displayName = \"Select\"\n\n\tconstructor(){\n\t\tsuper();\n\t\tthis.selectedElement = React.createRef();\n\t}\n\t\n  render(){\n    const { children, open } = this.props;\n    return React.cloneElement(children, {ref: this.selectedElement, onClick: open});\n  }\n}\n\nexport default Select;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nclass Controller extends React.Component{\n  constructor(props) {\n    super(props);\n  \n    this.state = {\n      isOpen: false,\n      style: {\n        position: \"absolute\",\n        top: 0,\n        left: 0\n      }\n    };\n  }\n  \n  open = () => {\n    this.setState({isOpen: true});\n  }\n  \n  close = () => {\n    this.setState({isOpen: false});\n  }\n\n  getPos = (left, top, height) => {\n    this.setState(prevState => (\n      {style: {...prevState.style, left, top: top + height}}));\n  }\n  \n  render(){\n    const { children } = this.props;\n    const { isOpen, style } = this.state;\n\n    const inputChildren = React.Children.map(children, child => {\n      if(child.type.displayName === \"Select\"){\n        return React.cloneElement(child, {open: this.open});\n      }\n      else{\n        return isOpen && ReactDOM.createPortal(\n          <span style={style}>React.cloneElement(child)</span>, document.body);\n      }\n    });\n\n    return inputChildren;\n  }\n}\n\nexport default Controller;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nexport default class Tooltip extends React.Component {\n  static propTypes = {\n    children: PropTypes.any.isRequired,\n    content: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.array,\n    ]),\n    styles: PropTypes.object\n  }\n\n  styles = {\n    wrapper: {\n      position: 'relative',\n      display: 'inline-block',\n      zIndex: '98',\n      color: '#555',\n      cursor: 'help'\n    },\n    tooltip: {\n      position: 'absolute',\n      zIndex: '99',\n      minWidth: '200px',\n      maxWidth: '420px',\n      background: '#000',\n      bottom: '100%',\n      left: '50%',\n      marginBottom: '10px',\n      padding: '5px',\n      WebkitTransform: 'translateX(-50%)',\n      msTransform: 'translateX(-50%)',\n      OTransform: 'translateX(-50%)',\n      transform: 'translateX(-50%)'\n    },\n    content: {\n      background: '#000',\n      color: '#fff',\n      display: 'inline',\n      fontSize: '.8em',\n      padding: '.3em 1em'\n    },\n    arrow: {\n      position: 'absolute',\n      width: '0',\n      height: '0',\n      bottom: '-5px',\n      left: '50%',\n      marginLeft: '-5px',\n      borderLeft: 'solid transparent 5px',\n      borderRight: 'solid transparent 5px',\n      borderTop: 'solid #000 5px'\n    },\n    gap: {\n      position: 'absolute',\n      width: '100%',\n      height: '20px',\n      bottom: '-20px'\n    },\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false\n    };\n    if (props.styles) this.mergeStyles(props.styles);\n  }\n\n  mergeStyles = (userStyles) => {\n    Object.keys(this.styles).forEach((name) => {\n      Object.assign(this.styles[name], userStyles[name]);\n    });\n  }\n\n  show = () => this.setVisibility(true);\n\n  hide = () => this.setVisibility(false);\n\n  setVisibility = (visible) => {\n    this.setState(Object.assign({}, this.state, {\n      visible\n    }));\n  }\n\n  handleTouch = () => {\n    this.show();\n    this.assignOutsideTouchHandler();\n  }\n\n  assignOutsideTouchHandler = () => {\n    const handler = (e) => {\n      let currentNode = e.target;\n      const componentNode = ReactDOM.findDOMNode(this.refs.instance);\n      while (currentNode.parentNode) {\n        if (currentNode === componentNode) return;\n        currentNode = currentNode.parentNode;\n      }\n      if (currentNode !== document) return;\n      this.hide();\n      document.removeEventListener('touchstart', handler);\n    };\n    document.addEventListener('touchstart', handler);\n  }\n\n  render() {\n    const {props, state, styles, show, hide, handleTouch} = this;\n    return (\n      <div\n        onMouseEnter={show}\n        onMouseLeave={hide}\n        onTouchStart={handleTouch}\n        ref=\"wrapper\"\n        style={styles.wrapper}>\n        {props.children}\n        {\n          state.visible &&\n          <div ref=\"tooltip\" style={styles.tooltip}>\n            <div ref=\"content\" style={styles.content}>{props.content}</div>\n            <div ref=\"arrow\" style={styles.arrow} />  \n            <div ref=\"gap\" style={styles.gap} />\n          </div>\n        }\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { getProducts } from '../redux/selectors';\nimport { connect } from 'react-redux';\nimport { addFormat, removeProduct, updateProductTitle, removeFormat } from '../redux/actions';\nimport { units } from '../constants/shared';\nimport './Product.css';\n\nclass Product extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.defaultState = {\n      productTitle: this.props.product,\n      qty: 0,\n      unit: 'kg',\n      editable: false,\n      editableProductTitle: false};\n\n    this.state = this.defaultState;\n  }\n\n  handleToggleEdit = (key) => {\n    this.setState({[key]: !this.state.editable});\n  }\n\n  handleUpdateInput = ( key, e ) => {\n    const value = e.target.value;\n    this.setState({[key]: value});\n  }\n\n  handleOnEnter = (e) => {\n    const product = this.props.product;\n    const keyCode = e.keyCode || e.which;\n    if (keyCode === 13) {\n      //check that productTitle changed since `updateProductTitle` deletes the original product.\n      if (product !== this.state.productTitle) {\n        this.props.updateProductTitle( product, this.state.productTitle );}\n      this.setState({editableProductTitle: !this.state.editableProductTitle});\n    }\n  }\n\n  \n  handleSubmit = () => {\n    const product = this.props.product;\n    const qty = this.state.qty;\n    const unit = this.state.unit;\n    this.props.addFormat(product, qty, unit);\n    this.setState({editable: !this.state.editable});\n  };\n\n  handleRemoveProduct = () => {\n    const conf = window.confirm('this will remove the product from the inventory. go a head?');\n    return (conf ?\n      this.props.removeProduct(this.props.product) :\n      null);\n  }\n\n  handleRemoveFormat = (id) => {\n    this.props.removeFormat(this.props.product, id);}\n  \n  render() {\n    const product = this.props.product;\n    const fmts = this.props.fmts;\n\t\treturn (\n      <div>\n        <p className='remove-button'\n              onClick= {this.handleRemoveProduct}\n        >X</p>\n        {!this.state.editableProductTitle ?\n        <h2 onClick={() => this.handleToggleEdit('editableProductTitle')} //the key to be toggled\n        >{product}</h2>\n          : <input\n              value={this.state.productTitle}\n              onChange={e => this.handleUpdateInput('productTitle', e)}\n              onKeyDown={(e) => this.handleOnEnter(e)}\n            autoFocus></input>}\n        <p>Available formats:</p>\n        {fmts.map(fmt =>\n          <div className='format-div'>\n            <li>{fmt.qty + ' ' + fmt.unit}</li>\n            {/* FIX: doesn't seem to work */}\n            <p onClick={() => this.handleRemoveFormat(fmts.indexOf(fmt))}>x</p>\n          </div>)}\n      {!this.state.editable ?\n        <h3 onClick={() => this.handleToggleEdit('editable')}//the key to be toggled\n        >Add Format</h3>\n        :\n        <div>\n        <input type='number' min={1} \n               className='qty'\n               value={this.state.qty}\n               onChange={e => this.handleUpdateInput('qty', e)}\n               ></input>\n          <select\n            value={this.state.unit}\n            onChange={e => this.handleUpdateInput('unit', e)}>\n          {units.map((u) => (<option key={'unit-list-item-' + u} >{u}</option>))}\n          </select>\n          <button\n            className='button'\n            onClick = {this.handleSubmit}\n          >submit</button>\n        </div>}\n      </div>\n\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => {\n  const products = getProducts(state);\nreturn {\n  products};\n};\n\nexport default connect(mapStateToProps, { addFormat, removeProduct, updateProductTitle, removeFormat })(Product);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { addProduct } from '../redux/actions';\nimport { units } from '../constants/shared';\nimport './AddProduct.css';\nclass AddProduct extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.defaultState = {\n      editable: false,\n      editableTitle: true,\n\t\t\ttitle: '',\n\t\t\tqty: 0,\n      unit: 'kg'\n\t\t};\n    this.state = this.defaultState;\n\t}\n\n  handleEdit = () => {\n    this.setState({editable: !this.state.editable});\n  }\n\n  handleUpdate = (key, e) => {\n    const value = e.target.value;\n    this.setState({[key]: value});\n  }\n\n  handleToggle = () => {\n    this.setState({editableTitle: !this.editableTitle});\n  }\n\n  handleTitleEnterKey = (e) => {\n    const keyCode = e.keyCode || e.which;\n    if (keyCode === 13) {\n      this.setState({editableTitle: !this.state.editableTitle});\n    }}\n\n  handleSubmit = () => {\n    this.props.addProduct(this.state.title, [{qty: this.state.qty, unit: this.state.unit}]);\n    this.setState(this.defaultState);\n  }\n  \n\trender(){\n  return(<div>\n           {!this.state.editable ?\n             <h2 className='button'\n                 onClick={this.handleEdit}\n             >{'<add a product>'}</h2> :\n             <div className='add-product-box'\n               //closes the box when clicking outside:\n                  // onBlur={this.handleEdit}\n             > \n               <h2>adding a product</h2>\n               {this.state.editableTitle ?\n                 <div>\n                 <label>product name</label>\n                   <input\n                     value={this.state.title}\n                     onChange={(e) => this.handleUpdate('title', e)}\n                     onKeyDown={(e) =>this.handleTitleEnterKey(e)}\n                 ></input>\n                 </div>\n                 :\n                 <div><h2 onClick={this.handleToggle}>{this.state.title}</h2></div>}\n               <div>\n                 <label>format:</label>\n                 <input type='number'\n                        min={0}\n                        onChange={(e) => this.handleUpdate('qty', e)}></input>\n                 <select\n                   onChange={(e) => this.handleUpdate('unit' ,e)}\n                 >{units.map(unit => <option>{unit}</option> )}</select>\n               </div>\n               <button\n                 className='button'\n                 onClick={this.handleSubmit}\n               >Submit</button>\n               <p className='cancel-button'\n                  onClick={this.handleEdit}>cancel</p>\n             </div>}\n         </div>);\n\t};\n}\n\nexport default connect(null, { addProduct })(AddProduct);\n\n","import React from 'react';\nimport { getProducts } from '../redux/selectors';\nimport { connect } from 'react-redux';\nimport Controller from './Controller';\nimport Select from './Select';\nimport Tooltip from './Tooltip';\nimport Product from './Product';\nimport AddProduct from './AddProduct';\nimport './IngredientsDB.css';\nimport _ from 'lodash';\n\nclass IngredientsDB extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const products = _.keys(this.props.products);\n    this.initialState = _.zipObject(products, products.map(p => false));\n    this.state = this.initialState;\n  }\n    \n      \n  handleHover = ( product ) => {\n    this.setState({\n      [product]: !this.state[product]\n    });\n  };\n\n \n  render() {\n    const products = this.props.products;\n    const whiteRoundedStyle = {\n      wrapper: {\n        flexAlign: 'row',\n        display: 'inline-block',\n        cursor: 'pointer'\n      },\n      content: {\n        backgroundColor: 'white',\n        color: '#000',\n        fontSize: '1.2rem',\n        lineHeight: '150%'\n      },\n      tooltip: {\n        backgroundColor: 'white',\n        borderRadius: '10px',\n        bottom: '40%',\n        left: '100%',\n        opacity: '0.7'\n      },\n      arrow: {\n        borderLeft: 'solid white 5px'\n      }\n    };\n\n    return (\n      <div className='ingredients-head'>\n        <h2 className='ingredients-list-title'>Stored Ingredients:</h2>\n        <AddProduct />\n        {_.keys(products).map(\n          product =>\n            <Tooltip\n              content={<div>\n\n                         <Product\n                           product={product}\n                           fmts={products[product]}/>\n                       </div>}\n              styles={whiteRoundedStyle}\n            >  <p className='product'\n                  id={product}\n                  /* title={'Available formats: ' + products[product].map(fmt => fmt.qty + ' ' + fmt.unit + '. ')} */\n               >{product}</p>\n            </Tooltip>\n          \n          \n          \n) \n\n}\n        \n      </div>\n    );\n  }\n}\n\n\n      \nconst mapStateToProps = state => {\n  const products = getProducts(state);\n  return {\n    products\n  };\n};\n\nexport default connect(mapStateToProps)(IngredientsDB);\n","import React from 'react';\nimport './Cell.css';\nimport { getRecipes, getWeek } from '../redux/selectors';\nimport { addCell, removeCell, toggleField, updateCell } from '../redux/actions';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nclass Cell extends React.Component {\n \n  //helper to capitalize the name property where necessary\n  titleCase(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n}\n  \n  // handleAddMeal = () => {\n  //   this.setState({editable: !this.state.editable});\n  // }\n\n  handleRemoveMeal = ( id ) => {\n    this.props.removeCell( id );\n  }\n\n  handleToggleEdit = (cellID, field) =>\n    this.props.toggleField(cellID, field);\n\n  handleUpdateInput = ( e, cellID ) => {\n    const value = e.target.value;\n    const field = e.target.name;\n    this.props.updateCell(cellID, field, value);\n  }\n  \n  handleEnterKey = (e, cellID) => {\n    const keyCode = e.keyCode || e.which;\n    const field = 'editable' + this.titleCase(e.target.name);\n    if (keyCode === 13) {\n      this.props.toggleField(cellID, field);\n    }\n  }\n\n  handleBlur = (e, cellID) => {\n    const field = 'editable' + this.titleCase(e.target.name);\n    this.props.toggleField(cellID, field);\n  }\n\n  render () {\n    const cellID = this.props.cellID;\n    \n\t\treturn(\n      <div className='cell'>\n        {this.props.week[cellID] && this.props.week[cellID].editable === true\n          ? \n          <div>\n            <span\n              className='cross'\n              onClick={() => this.handleRemoveMeal(cellID)}\n            >x</span>\n            {this.props.week[cellID].editableDish === false ?\n              <h2\n                onClick={() => this.handleToggleEdit(cellID, 'editableDish')}\n                 >\n                {'Dish: ' + this.props.week[cellID].dish}</h2> :\n              <div><input\n                     type='text'\n                     name='dish'\n                     onKeyDown={(e) => this.handleEnterKey(e, cellID)}\n                     onChange={e => this.handleUpdateInput(e, cellID)}\n                     onBlur={(e) => this.handleBlur(e, cellID)}\n                     list='dishes'\n                     value={this.props.week.dish}\n                   autoFocus/>\n                 <datalist id='dishes'>\n                   {_.keys(this.props.recipes).map(recipe => (\n                     <option value={recipe} />))}\n                </datalist>\n              </div>\n              }\n          {this.props.week[cellID].editableServings === false ?\n            <h2\n              onClick={() => this.handleToggleEdit(cellID, 'editableServings')}\n            >{'Servings:' + this.props.week[cellID].servings}</h2>\n            :\n            <input\n              name='servings'\n              type='number'\n              value={this.props.week[cellID].servings}\n              min='1'\n              step='1'\n              onKeyDown={(e) => this.handleEnterKey(e, cellID)}\n              onChange={e => this.handleUpdateInput(e, cellID)}\n              onFocus={e => e.target.select()}\n              onBlur={(e) => this.handleBlur(e, cellID)}\n              autoFocus\n            ></input>}\n          </div>\n          :\n          <p\n            className='plus'\n            onClick=\n              {() => this.props.addCell( cellID ) }\n              /* {this.handleAddMeal} */\n          >+</p>\n        }\n      </div>\n    );\n  }\n}\n\t\nconst mapStateToProps = state => {\n  const recipes = getRecipes(state);\n  const week = getWeek(state);\n  return {\n    recipes,\n    week\n  };\n  \n};\n\n\nexport default connect(mapStateToProps, { addCell, removeCell, toggleField, updateCell })(Cell);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { getWeekArray, getProducts, getRecipes, getWeek } from '../redux/selectors';\nimport { unitsMap, unit } from '../constants/shared';\nimport { weightToGramms, volumeToMl } from '../utilities/unitConversion';\nimport _ from 'lodash';\n\nconst CalcDishes = (props) => {\n  const weekArray = props.weekArray;\n  const products = props.products;\n  const recipes = props.recipes;\n  const week = props.week;\n\n  const unitConverter = (name, qty, unit) => {\n    if (unitsMap.weight.includes(unit)) {\n      const newQty = weightToGramms(qty, unit);\n      return({name: name, qty: newQty, unit: 'gr'});\n    }\n    else if (unitsMap.volume.includes(unit)) {\n      const newQty = volumeToMl(qty, unit);\n      return({name: name, qty: newQty, unit:'ml'});\n    }\n    else if (unitsMap.units.includes(unit)) {\n      return ({name: name, qty: qty,unit: unit});\n    }\n    else return ({name: name, qty: qty, unit: unit});\n  };\n  \n  const allMeals = (weekArray && weekArray !== undefined) ?\n        weekArray.map( ([dish, servings])  =>\n          recipes[dish] ? _.keys(recipes[dish].ingredients).map(\n            ingredient => {\n\n              const ingredientInRecipe = recipes[dish].ingredients[ingredient];\n              \n              return([\n                ingredientInRecipe.name,\n                ingredientInRecipe.qty * (servings / recipes[dish].servings),\n                recipes[dish].ingredients[ingredient].unit\n              ]);\n            })\n          : dish)\n        : null;\n\n  const converted = (allMeals && allMeals !== undefined) ?\n        allMeals.map(ingredients => _.isArray(ingredients) ? //isArray means it was a dish recognised in store/recipes (AllMeals)\n          ingredients.map(([name, qty, unit]) =>\n            unitConverter(name, qty, unit)   \n          )  : '#' + ingredients + '#')\n        : null;\n\n  const combinedLodash =\n        (_.isArray(converted) && _.isObject(converted[0])) ?\n         _(converted.flat()\n         ).groupBy('name').map((objs, key) =>\n           ({name: key, qty: _.sumBy(objs, 'qty')})).value()\n        :\n    null;\n\n  const combined = \n        (_.isArray(converted)  && _.isObject(converted[0]))\n        ?\n        converted.flat()\n        .reduce((a, c) => {\n          (a[c.name] || (a[c.name] = [c.unit]))\n            .push(c.qty);\n          return a;\n        }\n          , [])\n    :\n    null;\n\n  const summed =\n        (_.isArray(converted)  && _.isObject(converted[0]))\n        ?\n         _.keys(combined).map(product =>\n          { const [unit, ...rest] = combined[product];\n            const summedValues = rest.reduce((a, c) => a + c, 0);\n            return( [product, unit, summedValues] );})\n          :\n          null;\n\n\n  const SummedTable = () => \n        (_.isArray(converted)  && _.isObject(converted[0]))\n        ?\n        \n        <div>\n          <table>\n            <tbody>\n              <tr><td>product</td><td>qty</td><td>unit</td></tr>\n              {_.keys(summed).map(i =>\n                <tr>\n                  <td>{summed[i][0]}</td>\n                  <td>{summed[i][2]}</td>\n                  <td>{summed[i][1]}</td>\n                </tr>)}\n  </tbody></table>\n        </div>\n        :\n        <h1>oops</h1>;\n        \n  \n        \n  const handleConversion = () => console.log(summed);\n  \n  return (<div>\n            <h2>The total of ingredients is:</h2>\n            <div>{allMeals}</div>\n            <h2>Which translates to:</h2>\n            {/* <div>{converted}</div> */}\n            <h2> now combining:</h2>\n            <div><h1 onClick={handleConversion}>click to try</h1>\n            </div>\n            <SummedTable />\n          </div>);\n};\n\n\nconst ShoppingList = (props) => {\n\n  const weekArray = props.weekArray;\n  \n  return(\n    <div>\n      <h2 className='button'>Show me the shopping list for this week, please.</h2>\n      {_.isEmpty(weekArray) ?\n        <p>'waiting...'</p>\n        :\n        <CalcDishes\n          week={props.week}\n          weekArray={props.weekArray}\n          products={props.products}\n          recipes={props.recipes} />}\n      \n    </div>);\n\t\n\n};\n\nconst mapStateToProps = state => {\n  const week = getWeek(state);\n  const weekArray = getWeekArray(state);\n  const products = getProducts(state);\n  const recipes = getRecipes(state);\n  return {\n    week,\n    weekArray,\n    products,\n    recipes\n  };\n};\n\n\nexport default connect(mapStateToProps)(ShoppingList);\n","//MEASUREMENT HELPER FUNCTIONS:\n//WEIGHT:\nconst convertKgGr = (qty) => qty * 1000;\nconst convertKgLb = (qty) => qty * 0.4535924;\nconst convertKgOz = (qty) => qty * 0.02834952;\n\nconst convertGrKg = (qty) => qty / 1000;\nconst convertGrLb = (qty) => qty * 0.002204623;\nconst convertGrOz = (qty) => qty * 28.34952;\n\nconst convertTsbpGr = (qty) => qty * 12.78;\nconst convertTspGr = (qty) => qty * 4.92;\n\nconst convertLbKg = (qty) => qty * 2.204623;\nconst convertLbGr = (qty) => qty * 2204.623;\nconst convertLbOz = (qty) => qty * 0.0625;\n\nconst convertOzKg = (qty) => qty * 35.27396;\nconst convertOzLb = (qty) => qty * 16;\nconst convertOzGr = (qty) => qty * 0.03527396;\nconst convertCupGr = (qty) => qty * 138; //TODO needs an extra stage to convert volume to weight depending on density\n//VOLUME:\nconst convertLitreMl = (qty) => qty * 1000;\nconst convertMlLitre = (qty) => qty / 1000;\nconst convertCupMl = (qty) => qty * 284.131;\nconst convertTbspMl = (qty) => qty * 15;\nconst convertTspMl = (qty) => qty * 5;\n\n\n\n\nexport const weightToGramms = (qty, unit) => {\n\tswitch(unit) {\n\t\tcase 'gr' : {\n\t\t\treturn(qty);\n\t\t}\n\t\tcase 'kg': {\n\t\t\treturn(convertKgGr(qty));\n\t\t}\n\t\tcase 'lb': {\n\t\t\treturn(convertLbGr(qty));\n\t\t}\n\t\tcase 'oz': {\n\t\t\treturn(convertOzGr(qty));\n\t\t}\n\t\tcase 'tbsp - dry': {\n\t\t\treturn(convertTsbpGr(qty));\n\t\t}\n\t\tcase 'tsp - dry': {\n\t\t\treturn(convertTspGr(qty));\n\t\t}\n\t\tcase 'cup-dry': {\n\t\t\treturn(convertCupGr(qty));\n\t\t}\n\t\tdefault: return null ;\n\t}\n};\n\nexport const volumeToMl = (qty, unit) => {\n\tswitch(unit) {\n\t\tcase 'ml': {\n\t\t\treturn(qty);\n\t\t}\n\t\tcase 'litre': {\n\t\t\treturn(convertLitreMl(qty));\n\t\t}\n\t\tcase 'cup': {\n\t\t\treturn(convertCupMl(qty));\n\t\t}\n\t\tcase 'tbsp - liquid': {\n\t\t\treturn(convertTbspMl(qty));\n\t\t}\n\t\tcase 'tsp - liquid': {\n\t\t\treturn(convertTspMl(qty));\n\t\t}\n\tdefault: return null;\n\t}\n};\n","import React from 'react';\nimport Cell from './Cell';\nimport ShoppingList from './ShoppingList';\nimport { getWeek } from '../redux/selectors';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nconst EmptyCell = () =>\n      (<div >\n       </div>);\n\nclass WeeklyView extends React.Component {\n\n  // FIX -> find a way to look for day value as a predicate to return  all the day's entries or empty..\n  mealsByDay = ( weekday ) => {\n    \n    const entries= _.keys(this.props.week).filter( entry => (entry.startsWith(weekday)));\n    return entries;\n      \n  }\n  \nrender(){\n  const weekdays = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\n  const longestColumn = _.max(weekdays.map(weekday => this.mealsByDay(weekday).length));\n\t\treturn(\n      <div>\n        <table>\n          <thead>\n            <tr className='top-bar'>{weekdays.map(day => \n              (<td className='weekly-view-header'><h2 >{day}</h2></td>))}\n            </tr>\n          </thead>\n          <tbody>\n            {/* first row */}\n            <tr className='weekly-view-cell'>\n                {weekdays.map(cell =>\n                  <td>\n                   <Cell\n                     cellID={cell + '-1'} \n                     key={cell + '-1'}\n                   />\n                  </td>)\n                }</tr>\n            {/* consecutive rows */}\n            {_.range(2, _.max([2, longestColumn + 2]) + 1).map(row =>\n              <tr className='weekly-view-cell'>\n                {weekdays.map(weekday =>\n                  this.mealsByDay(weekday)\n                  && this.mealsByDay(weekday).length + 1 >= row\n                  ?\n                  <td>\n                   <Cell\n                     cellID={weekday + '-' + row} \n                     key={weekday + '-' + row}\n                   />\n                     </td>\n                : \n                     <td>\n                  <EmptyCell />\n                        </td>\n                )}\n              </tr>)}\n            \n          </tbody>\n        </table>\n        <ShoppingList />\n\t\t\t</div>\n    );\n\t}\n}\n\nconst mapToProps = ( state ) => {\n  return {\n    week: getWeek(state)\n  };\n}; \n\nexport default connect(mapToProps)(WeeklyView);\n","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport NewRecipe from './components/NewRecipe';\nimport RecipeList from './components/RecipeList';\nimport EditRecipe from './components/EditRecipe';\nimport IngredientsDB from './components/IngredientsDB';\nimport WeeklyView from './components/WeeklyView';\nfunction ColorBtn() {\n  return (\n    <button>cook</button>\n  );\n\n} ;\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        {/* <img src={logo} className=\"App-logo\" alt=\"logo\" /> */}\n        {/* <ColorBtn /> */}\n        <h2 className='App-title'>Weekly shopping</h2>\n      </header>\n      \n      <div className='controls'>\n        <div>\n        <div className='recipes-panel'>\n          <NewRecipe />\n          <RecipeList />\n          <EditRecipe />\n        </div>\n       \n     \n      <div className='ingredientsDB'>\n        <WeeklyView />\n      </div>\n        </div>\n       <IngredientsDB />\n      </div>\n    </div>\n    \n  );\n}\n\nexport default App;\n","import _ from 'lodash';\nimport { ADD_RECIPE } from \"../actionTypes\";\n\nconst initialState = {\n\t\n\t'rice pudding': {\n\t\ttitle: 'rice pudding',\n\t\tservings: 2,\n\t\teditableTitle: false,\n\t\teditableServings: false,\n\t\tingredients: {\n\t\t\t1: {\n\t\t\t\tname: 'rice',\n\t\t\t\tqty: 50,\n\t\t\t\tunit: 'gr',\n\t\t\t\teditable: null},\n\t\t\t2: {\n\t\t\t\tname: 'unsalted butter',\n\t\t\t\tqty: 25,\n\t\t\t\tunit: 'gr',\n\t\t\t\teditable: null},\n\t\t\t3: {\n\t\t\t\tname: 'whole milk',\n\t\t\t\tqty: 500,\n\t\t\t\tunit: 'ml',\n\t\t\t\teditable: null},\n\t\t\t4: {\n\t\t\t\tname: 'caster sugar',\n\t\t\t\tqty: 25,\n\t\t\t\tunit: 'gr',\n\t\t\t\teditable: null}\n\t\t\t\n\t\t}\n\t},\n\t'mash potatoes': {\n\t\ttitle: 'mash potatoes',\n\t\teditableTitle: false,\n\t\teditableServings: false,\n\t\tservings: 5,\n\t\tingredients: {\n\t\t\t1: {\n\t\t\t\tname: 'potatoes',\n\t\t\t\tqty: 1,\n\t\t\t\tunit: 'kg',\n\t\t\t\teditable: null},\n\t\t\t2: {\n\t\t\t\tname: 'whole milk',\n\t\t\t\tqty: 250,\n\t\t\t\tunit: 'ml',\n\t\t\t\teditable: null},\n\t\t\t3: {\n\t\t\t\tname: 'salted butter',\n\t\t\t\tqty: 50,\n\t\t\t\tunit: 'gr',\n\t\t\t\teditable: null},\n\t\t\t4: {\n\t\t\t\tname: 'salt',\n\t\t\t\tqty: 2,\n\t\t\t\tunit: 'gr',\n\t\t\t\teditable: null}}\n\t}\n}; \n\nexport default function(state = initialState, action) {\n\tswitch (action.type) {\n    case ADD_RECIPE: {\n\t\t\tconst { recipe , content } = action.payload;\n      return {\n        ...state,\n\t\t\t\t...state.recipes,\n\t\t\t\t[recipe]: content\n      };\n    }\n\t\t\n\t\tdefault: return state;}\n}\n","import { SELECT_RECIPE } from '../actionTypes';\n\nconst initialState = {\n\tselectedRecipe: {}\n};\n\nexport default function(state = initialState, action) {\n\tswitch (action.type) {\n      case SELECT_RECIPE: {\n\t\tconst { recipe } = action.payload;\n      return {\n        ...state,\n\t\t\t\tselectedRecipe:{\n\t\t\t\trecipe\n\t\t\t\t}\n\t\t\t};\n\t\t\t}\n\t\tdefault: return state;}\n}\n","import _ from 'lodash';\nimport { EDIT_RECIPE, TOGGLE_TITLE, TOGGLE_SERVINGS, UPDATE_TITLE, UPDATE_SERVINGS, TOGGLE_TABLE, UPDATE_TABLE, RESET_EDIT, ADD_INGREDIENT } from '../actionTypes';\n\nconst initialState = {\n\trecipe: {}\n};\n\nexport default function(state = initialState, action) {\n\tswitch (action.type) {\n    case EDIT_RECIPE: {\n\t\t\tconst { recipe } = action.payload;\n      return {\n\t\t\t\trecipe\n\t\t\t};\n\t\t}\n\t\t\t\n\t\tcase TOGGLE_TITLE: {\n\t\t\tconst { } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trecipe: {...state.recipe,\n\t\t\t\t\teditableTitle: !state.recipe.editableTitle \n\t\t\t\t}\t\n\t\t\t};\n\t\t}\n\n\tcase TOGGLE_SERVINGS: {\n\t\t\tconst { } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trecipe: {...state.recipe,\n\t\t\t\t\teditableServings: !state.recipe.editableServings \n\t\t\t\t}\t\n\t\t\t};\n\t}\n\n\t\tcase UPDATE_TITLE: {\n\t\t\tconst { title } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trecipe: {...state.recipe,\n\t\t\t\t\ttitle: title\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase UPDATE_SERVINGS: {\n\t\t\tconst { servings } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trecipe: {...state.recipe,\n\t\t\t\t\tservings: servings\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase TOGGLE_TABLE: {\n\t\t\tconst { id, className } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trecipe: {...state.recipe,\n\t\t\t\t\tingredients: {...state.recipe.ingredients,\n\t\t\t\t\t\t[id]: {...state.recipe.ingredients[id],\n\t\t\t\t\t\t\teditable: className\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase UPDATE_TABLE: {\n\t\t\tconst { id, className, value } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trecipe: {...state.recipe,\n\t\t\t\t\tingredients: {...state.recipe.ingredients,\n\t\t\t\t\t\t[id]: {...state.recipe.ingredients[id],\n\t\t\t\t\t\t\t[className]: value\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\t\t\n\t\n\t\tcase RESET_EDIT: {\n\t\t\treturn {...state,\n\t\t\t\trecipe: {}\n\t\t\t};\n\t\t}\n\n\t\tcase ADD_INGREDIENT: {\n\t\t\tconst existingIngredients = _.keys(state.recipe.ingredients).length;\n\t\t\treturn {...state,\n\t\t\t\trecipe: {...state.recipe,\n\t\t\t\t\tingredients: {...state.recipe.ingredients,\n\t\t\t\t\t\t[existingIngredients + 1]: {name: 'new ingredient', qty: 1, unit: 'kg'}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tdefault: return state;}\n\n}\n","import { ADD_PRODUCT, REMOVE_PRODUCT, UPDATE_PRODUCT_TITLE, ADD_FORMAT, REMOVE_FORMAT } from '../actionTypes.js';\n\nconst initialState = {\n\t\n\t\t'salt': [{qty: 1, unit: 'kg'}, {qty: 500, unit: 'gr'}],\n\t\t'rice': [{qty: 1, unit: 'kg'}],\n\t\t'unsalted butter': [{qty: 250, unit: 'gr'}],\n\t\t'salted butter': [{qty: 250, 'unit': 'gr'}],\n\t\t'whole milk': [{qty: 1, unit: 'litre'}],\n\t\t'semiskimmed milk': [{qty: 1, unit: 'litre'}],\n\t\t'caster sugar': [{qty: 1, unit: 'kg'}],\n\t\t'potatoes': [{qty: 2, unit: 'kg'}, {qty: 3, unit: 'kg'}, {qty: 5, unit: 'kg'}]};\n\nexport default function(state = initialState, action) {\n\tswitch (action.type) {\n\t\tcase ADD_PRODUCT: {\n\t\t\tconst { product, formats } = action.payload;\n\t\t\treturn {...state, \n\t\t\t\t[product]: formats };\n\t\t}\n\t\t\t\n\t\tcase REMOVE_PRODUCT: {\n\t\t\tconst { product } = action.payload;\n\t\t\tconst newState = Object.assign({}, state);\n\t\t\tdelete newState[product];\n\t\t\treturn newState;\n\t\t}\n\t\t\t\n\t\tcase UPDATE_PRODUCT_TITLE: {\n\t\t\tconst { product, newTitle } = action.payload;\n\t\t\tstate[newTitle] = state[product];\n\t\t\tdelete state[product];\n\t\t\treturn {...state\n\t\t\t\t\n\t\t\t\t };\n\t\t}\n\n\t\tcase ADD_FORMAT: {\n\t\t\tconst { product, qty, unit } = action.payload;\n\t\t\treturn{ ...state,\n\t\t\t\t[product]: [...state[product],\n\t\t\t\t\t{qty: qty, unit: unit}\n\t\t\t\t]};\n\t\t}\n\n\t\t\t//FIX -> doesn't seem to work...\n\t\tcase REMOVE_FORMAT: {\n\t\t\tconst { product, id } = action.payload;\n\t\t\treturn {...state,\n\t\t\t\t[product]: state[product].filter(i => (state[product].indexOf(i) !== id))\n\t\t\t\t\n\t\t\t};\n\t\t}\n\n\t\tdefault: return state;\n\t}\n}\n\n","import _ from 'lodash';\nimport { ADD_CELL, REMOVE_CELL, TOGGLE_FIELD, UPDATE_CELL } from '../actionTypes';\n\nconst initialState = {\n\t \n};\n\nfunction renameKey (key) {\n\tconst splitKey = key.split('-');\n\treturn splitKey[0] + '-' + (splitKey[1]- 1);\n}\n\nexport default function(state = initialState, action) {\n\tswitch (action.type) {\n    case ADD_CELL: {\n\t\t\tconst { cellID } = action.payload;\n      return {...state,\n\t\t\t\t[cellID]: {\n\t\t\t\t\teditable: true,\n\t\t\t\t\teditableDish: false,\n\t\t\t\t\tdish: '',\n\t\t\t\t\teditableServings: false,\n\t\t\t\t\tservings: 1\n\t\t\t\t} \n\t\t\t};\n\t\t}\n\t\t\t\n\t\tcase REMOVE_CELL: {\n\t\t\tconst { cellID } = action.payload;\n\t\t\tconst weekday = cellID.split('-')[0];\n\t\t\tconst column = _.keys(state).filter(key => key.split('-')[0] === weekday);\n\t\t\tconst biggerThanRemoved = column.filter(key => parseInt(key.split('-')[1]) > parseInt(cellID.split('-')[1]));\n\t\t\tconst newState = Object.assign({}, state);\n\t\t\tdelete newState[cellID];\n\t\t\t_.keys(newState).map(key => {\n\t\t\t\tif (biggerThanRemoved.includes(key))  {\n\t\t\t\t\tnewState[renameKey(key)] = newState[key];\n\t\t\t\t\tdelete newState[key];}});\n\t\t \n\t\t\treturn {...newState\n\t\t\t};\n\t\t\t\n\t\t}\n\n\t\tcase TOGGLE_FIELD: {\n\t\t\tconst { cellID, field } = action.payload;\n\t\t\treturn {...state,\n\t\t\t\t[cellID]: {...state[cellID],\n\t\t\t\t\t[field]: !state[cellID][field]\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tcase UPDATE_CELL: {\n\t\t\tconst { cellID, field, value } = action.payload;\n\t\t\treturn {...state,\n\t\t\t\t[cellID]:{...state[cellID],\n\t\t\t\t\t[field]: value}\n\t\t\t};\n\t\t}\n\n\t\tdefault: return state;}\n\t\n}\n\t\n\n\t\n","import { combineReducers } from \"redux\";\nimport recipes from './recipes';\nimport selections from './selections';\nimport editedRecipe from './edited';\nimport pantry from './pantry';\nimport week from './week';\nexport default combineReducers({ recipes, selections, editedRecipe, pantry, week });\n","import { createStore } from \"redux\";\nimport { persistStore, persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport autoMergeLevel2 from 'redux-persist/lib/stateReconciler/autoMergeLevel2';\nimport rootReducer from \"./reducers\";\n\n\nconst persistConfig = {\n key: 'root',\n storage: storage,\n\tstateReconciler: autoMergeLevel2 // see \"Merge Process\" section for details.\n\t,  blacklist: ['recipes', 'week', 'pantry'] // -> look in doc.org\n};\n\nconst pReducer = persistReducer(persistConfig, rootReducer);\n\nexport const store = createStore(\n\tpReducer,\n\twindow.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\nexport const persistor = persistStore(store);\n\n\n\n//ORIGIAL STORE SETUP\n// export default createStore(rootReducer,\n// \twindow.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n// );\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\n// import store from './redux/store';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { persistor, store } from './redux/store';\nReactDOM.render(\n\t\t<Provider store={store}>\n\t\t<PersistGate loading={null} persistor={persistor}>\n\t<App />\n  </PersistGate>\n\t</Provider>, document.getElementById('root'));\n\n\n\n\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}